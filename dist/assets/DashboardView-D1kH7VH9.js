import{k as ue,r as v,l as z,m as J,n as te,p as ee,q as re,s as se,u as ae,v as oe,d as W,w as le,o as Q,c as u,e,x,t as r,y as Z,z as R,A as N,B as H,f as G,C as de,D as M,E as U,g as n,G as L,H as I,I as ce,a as pe,J as ge,K as X,L as ve,M as me,h as be}from"./index-DJoW1PEK.js";const xe=ue("dashboard",()=>{const S=v({events:0,actualities:0,photos:0,messages:0}),w=v({events:0,actualities:0,photos:0,messages:0}),p=v({newsletter:0,financing:0,training:0,publications:0,eventRegistrations:0}),m=v(!1),h=v(null),c=3e4,d=z(()=>{const j=(f,g)=>{if(g===0)return f>0?"+100%":"0%";const E=(f-g)/g*100;return`${E>=0?"+":""}${Math.round(E)}%`};return[{id:"events",label:"√âv√©nements",value:S.value.events.toString(),change:j(S.value.events,w.value.events),icon:"fas fa-calendar-alt",bgColor:"bg-gradient-to-br from-blue-100 to-blue-200",iconColor:"text-blue-600",badgeColor:S.value.events>=w.value.events?"bg-green-100 text-green-700":"bg-red-100 text-red-700"},{id:"actualites",label:"Actualit√©s",value:S.value.actualities.toString(),change:j(S.value.actualities,w.value.actualities),icon:"fas fa-newspaper",bgColor:"bg-gradient-to-br from-indigo-100 to-indigo-200",iconColor:"text-indigo-600",badgeColor:S.value.actualities>=w.value.actualities?"bg-green-100 text-green-700":"bg-red-100 text-red-700"},{id:"messages",label:"Messages",value:S.value.messages.toString(),change:j(S.value.messages,w.value.messages),icon:"fas fa-envelope",bgColor:"bg-gradient-to-br from-purple-100 to-purple-200",iconColor:"text-purple-600",badgeColor:S.value.messages>=w.value.messages?"bg-green-100 text-green-700":"bg-red-100 text-red-700"},{id:"photos",label:"Photos",value:S.value.photos.toString(),change:j(S.value.photos,w.value.photos),icon:"fas fa-images",bgColor:"bg-gradient-to-br from-pink-100 to-pink-200",iconColor:"text-pink-600",badgeColor:S.value.photos>=w.value.photos?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}]}),k=z(()=>[{id:"overview",label:"Vue d'ensemble",icon:"fas fa-home",badge:null},{id:"events",label:"√âv√©nements",icon:"fas fa-calendar-alt",badge:null},{id:"event-registrations",label:"Inscriptions √âv√©nements",icon:"fas fa-user-check",badge:p.value.eventRegistrations>0?p.value.eventRegistrations.toString():null},{id:"actualites",label:"Actualit√©s",icon:"fas fa-newspaper",badge:null},{id:"gallery",label:"Galerie",icon:"fas fa-images",badge:null},{id:"newsletter",label:"Newsletter",icon:"fas fa-envelope",badge:p.value.newsletter>0?p.value.newsletter.toString():null},{id:"financing",label:"Demandes Financement",icon:"fas fa-hand-holding-usd",badge:p.value.financing>0?p.value.financing.toString():null},{id:"training",label:"Inscriptions Formation",icon:"fas fa-user-graduate",badge:p.value.training>0?p.value.training.toString():null},{id:"publications",label:"Demandes Publication",icon:"fas fa-file-alt",badge:p.value.publications>0?p.value.publications.toString():null}]),b=z(()=>h.value?Date.now()-h.value<c:!1),i=async(j=!1)=>{if(!(!j&&b.value&&S.value.events>0)&&!m.value)try{m.value=!0,w.value={...S.value};const[f,g,E,_]=await Promise.allSettled([J.getEvents({limit:1e3}),te.getActualities({limit:1e3}),ee.getPhotos({limit:1e3}),re.getAllSubscribers({limit:1e3})]);f.status==="fulfilled"?S.value.events=f.value.pagination?.total||f.value.data.length:console.error("Erreur lors du chargement des √©v√©nements:",f.reason),g.status==="fulfilled"?S.value.actualities=g.value.pagination?.total||g.value.data.length:console.error("Erreur lors du chargement des actualit√©s:",g.reason),E.status==="fulfilled"?S.value.photos=E.value.pagination?.total||E.value.data.length:console.error("Erreur lors du chargement des photos:",E.reason),_.status==="fulfilled"?S.value.messages=_.value.data.length:_.status==="rejected"&&console.error("Erreur lors du chargement des messages:",_.reason),h.value=Date.now()}catch(f){console.error("Erreur lors du chargement des stats:",f)}finally{m.value=!1}},y=async(j=!1)=>{if(!(!j&&b.value&&p.value.newsletter>=0))try{const[f,g,E,_,D,C]=await Promise.allSettled([re.getAllSubscribers({status:"active",limit:1e3}),se.getRequests({status:"submitted",limit:1e3}),se.getRequests({status:"under-review",limit:1e3}),ae.getRegistrations({status:"pending",limit:1e3}),oe.getRequests({status:"pending",limit:1e3}),J.getAllRegistrations({status:"pending",limit:1e3})]);if(f.status==="fulfilled"?p.value.newsletter=f.value.data.length:f.status==="rejected"&&console.error("Erreur lors du chargement des newsletters:",f.reason),g.status==="fulfilled"&&E.status==="fulfilled")p.value.financing=g.value.data.length+E.value.data.length;else{const A=g.status==="rejected"?g.reason:E.status==="rejected"?E.reason:"Erreur inconnue";console.error("Erreur lors du chargement des demandes de financement:",A)}_.status==="fulfilled"?p.value.training=_.value.data.length:_.status==="rejected"&&console.error("Erreur lors du chargement des inscriptions aux formations:",_.reason),D.status==="fulfilled"?p.value.publications=D.value.data.length:D.status==="rejected"&&console.error("Erreur lors du chargement des demandes de publication:",D.reason),C.status==="fulfilled"?p.value.eventRegistrations=C.value.data.length:console.error("Erreur lors du chargement des inscriptions aux √©v√©nements:",C.reason),h.value||(h.value=Date.now())}catch(f){console.error("Erreur lors du chargement des compteurs:",f)}};return{stats:S,previousStats:w,notificationCounts:p,isLoading:m,statsWithChange:d,menuItems:k,isCacheValid:b,loadOverviewStats:i,loadNotificationCounts:y,refreshAll:async()=>{await Promise.all([i(!0),y(!0)])},reset:()=>{S.value={events:0,actualities:0,photos:0,messages:0},w.value={events:0,actualities:0,photos:0,messages:0},p.value={newsletter:0,financing:0,training:0,publications:0,eventRegistrations:0},h.value=null}}}),fe={class:"space-y-6"},ye={class:"flex items-center justify-between"},he={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-4"},we={class:"flex items-center gap-2"},$e={key:1,class:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100"},ke={class:"text-xl font-bold text-gray-900 mb-6"},_e={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},De=["min"],Ce={key:0,class:"mt-3"},Ee=["src"],Ae={key:1,class:"mt-3"},je=["src"],Re={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Te=["min"],Se={class:"flex items-center gap-3 mt-2"},Pe={class:"flex items-center gap-2 cursor-pointer"},Ne={class:"flex gap-4"},Fe=["disabled"],Ve={key:0,class:"fas fa-spinner fa-spin"},Ie=["disabled"],ze={class:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden"},Le={key:0,class:"p-12 text-center"},Me={key:1,class:"overflow-x-auto"},Ue={class:"w-full"},Ge={class:"divide-y divide-gray-200"},qe={class:"px-6 py-4"},Oe={class:"font-medium text-gray-900"},Be={class:"text-sm text-gray-500 mt-1"},Je={class:"px-6 py-4 text-gray-600"},Ye={key:0,class:"text-xs text-gray-500"},He={class:"px-6 py-4"},We={class:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-700"},Qe={class:"px-6 py-4 text-gray-600"},Ke={class:"px-6 py-4"},Xe={class:"flex items-center justify-center gap-2"},Ze=["onClick","disabled"],et=["onClick","disabled"],tt={key:0},st=5e3,lt=W({__name:"DashboardEvents",setup(S){const w=le.useToast(),p=v(!1),m=v(null),h=v([]),c=v(!1),d=v(null),k=v(null),b=v(null),i=v({title:"",startDate:"",startTime:"",location:"",description:"",image:"",type:"conference",registrationRequired:!1,endDate:"",endTime:"",address:"",content:""}),y=v(null),P=async(a=!1)=>{if(!(!a&&y.value&&Date.now()-y.value<st&&h.value.length>0)&&!c.value){c.value=!0,d.value=null;try{console.log("üîÑ Chargement des √©v√©nements...");const t=await J.getEvents();console.log("‚úÖ R√©ponse re√ßue:",t),t&&t.data?(console.log(`üìä ${t.data.length} √©v√©nement(s) charg√©(s)`),h.value=t.data,y.value=Date.now()):(console.warn("‚ö†Ô∏è Aucune donn√©e dans la r√©ponse:",t),h.value=[],d.value="Aucune donn√©e re√ßue du serveur")}catch(t){console.error("‚ùå Erreur compl√®te lors du chargement:",t),console.error("D√©tails:",{message:t.message,status:t.status,errors:t.errors,stack:t.stack}),t.status===500?d.value="Erreur serveur. V√©rifiez que le backend est d√©marr√© et que la base de donn√©es est accessible.":t.status===404?d.value="Endpoint non trouv√©. V√©rifiez la configuration de l'API.":t.status===0||t.message?.includes("fetch")||t.message?.includes("Failed to fetch")?d.value="Impossible de se connecter au serveur. V√©rifiez que le backend est accessible.":d.value=t.message||(t.errors?JSON.stringify(t.errors):"Erreur lors du chargement des √©v√©nements"),h.value=[]}finally{c.value=!1}}},T=a=>{const t=a.target;if(t&&t.files&&t.files[0]){k.value=t.files[0];const l=new FileReader;l.onload=$=>{b.value=$.target?.result},l.readAsDataURL(k.value)}},j=async()=>{c.value=!0,d.value=null;try{const a=i.value.startDate?.trim()||"",t=i.value.startTime?.trim()||"";if(!a){d.value="Veuillez entrer une date de d√©but",c.value=!1;return}if(!E(a)){d.value="Veuillez entrer une date de d√©but valide (format YYYY-MM-DD)",c.value=!1;return}if(!t){d.value="Veuillez entrer une heure de d√©but",c.value=!1;return}if(!_(t)){d.value="Veuillez entrer une heure de d√©but valide (format HH:MM)",c.value=!1;return}if(i.value.endDate&&i.value.endDate.trim()!==""){if(!E(i.value.endDate)){d.value="Veuillez entrer une date de fin valide",c.value=!1;return}const V=new Date(i.value.startDate);if(new Date(i.value.endDate)<V){d.value="La date de fin doit √™tre post√©rieure √† la date de d√©but",c.value=!1;return}}if(i.value.endTime&&i.value.endTime.trim()!==""){if(!_(i.value.endTime)){d.value="Veuillez entrer une heure de fin valide (format HH:MM)",c.value=!1;return}if(i.value.endDate===i.value.startDate){const V=i.value.startTime.split(":").map(Number),O=i.value.endTime.split(":").map(Number),q=V[0]*60+V[1];if(O[0]*60+O[1]<=q){d.value="L'heure de fin doit √™tre post√©rieure √† l'heure de d√©but",c.value=!1;return}}}const l=f(a),$=g(t),F={title:i.value.title.trim(),description:i.value.description.trim(),type:i.value.type,status:"upcoming",startDate:l,startTime:$,location:i.value.location.trim(),registrationRequired:i.value.registrationRequired,image:i.value.image||""};i.value.content&&i.value.content.trim()!==""&&(F.content=i.value.content.trim()),i.value.endDate&&i.value.endDate.trim()!==""&&(F.endDate=f(i.value.endDate)),i.value.endTime&&i.value.endTime.trim()!==""&&(F.endTime=g(i.value.endTime)),i.value.address&&i.value.address.trim()!==""&&(F.address=i.value.address.trim()),m.value?(await J.updateEvent(m.value.id,F,k.value||void 0),w.open({message:"‚úÖ √âv√©nement modifi√© avec succ√®s !",type:"success",position:"top-right",duration:5e3})):(await J.createEvent(F,k.value||void 0),w.open({message:"‚úÖ √âv√©nement cr√©√© et publi√© avec succ√®s !",type:"success",position:"top-right",duration:5e3})),await P(!0),A(),window.dispatchEvent(new CustomEvent("dashboard:update-stats"))}catch(a){console.error("Erreur compl√®te:",a);let t="Erreur lors de la sauvegarde de l'√©v√©nement. V√©rifiez la console pour plus de d√©tails.";a.errors?(t=`Erreurs de validation: ${Object.values(a.errors).flat().join(", ")}`,d.value=t):a.message?(t=a.message,d.value=a.message):d.value=t,w.open({message:`‚ùå ${t}`,type:"error",position:"top-right",duration:6e3})}finally{c.value=!1}},f=a=>{if(!a||typeof a!="string")return"";const t=a.trim();if(!t)return"";try{if(/^\d{4}-\d{2}-\d{2}$/.test(t))return t;const l=new Date(t);if(isNaN(l.getTime())){const O=t.split("-");if(O.length===3){const q=parseInt(O[0],10),B=parseInt(O[1],10),Y=parseInt(O[2],10);if(!isNaN(q)&&!isNaN(B)&&!isNaN(Y)){const K=new Date(q,B-1,Y);if(K.getFullYear()===q&&K.getMonth()===B-1&&K.getDate()===Y)return`${q}-${String(B).padStart(2,"0")}-${String(Y).padStart(2,"0")}`}}return""}const $=l.getFullYear(),F=String(l.getMonth()+1).padStart(2,"0"),V=String(l.getDate()).padStart(2,"0");return`${$}-${F}-${V}`}catch(l){return console.warn("Erreur lors de la normalisation de la date:",a,l),""}},g=a=>{if(!a||typeof a!="string")return"";const t=a.trim();if(!t)return"";try{if(/^([0-1][0-9]|2[0-3]):[0-5][0-9]$/.test(t)||/^([0-1][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]$/.test(t))return t.substring(0,5);const l=new Date(t);if(!isNaN(l.getTime())){const $=String(l.getHours()).padStart(2,"0"),F=String(l.getMinutes()).padStart(2,"0");return`${$}:${F}`}return""}catch(l){return console.warn("Erreur lors de la normalisation de l'heure:",a,l),""}},E=a=>{if(!a||typeof a!="string")return!1;const t=a.trim();if(!t)return!1;if(/^\d{4}-\d{2}-\d{2}$/.test(t)){const $=new Date(t);return!isNaN($.getTime())}const l=new Date(t);return!isNaN(l.getTime())},_=a=>{if(!a||typeof a!="string")return!1;const t=a.trim();return t?/^([0-1][0-9]|2[0-3]):[0-5][0-9]$/.test(t):!1},D=a=>{try{m.value=a,i.value={title:a.title||"",startDate:f(a.startDate),startTime:g(a.startTime),location:a.location||"",description:a.description||"",image:a.image||"",type:a.type||"conference",registrationRequired:a.registrationRequired||!1,endDate:f(a.endDate),endTime:g(a.endTime),address:a.address||"",content:a.content||""},k.value=null,b.value=a.image||null,p.value=!0}catch(t){console.error("Erreur lors de l'√©dition de l'√©v√©nement:",t),d.value="Erreur lors du chargement des donn√©es de l'√©v√©nement"}},C=async a=>{if(confirm("√ätes-vous s√ªr de vouloir supprimer cet √©v√©nement ?")){c.value=!0,d.value=null;try{await J.deleteEvent(a),await P(!0),w.open({message:"‚úÖ √âv√©nement supprim√© avec succ√®s !",type:"success",position:"top-right",duration:5e3}),window.dispatchEvent(new CustomEvent("dashboard:update-stats"))}catch(t){const l=t.message||"Erreur lors de la suppression de l'√©v√©nement";d.value=l,console.error("Erreur:",t),w.open({message:`‚ùå ${l}`,type:"error",position:"top-right",duration:6e3})}finally{c.value=!1}}},A=()=>{p.value=!1,m.value=null,k.value=null,b.value=null,i.value={title:"",startDate:"",startTime:"",location:"",description:"",image:"",type:"conference",registrationRequired:!1,endDate:"",endTime:"",address:"",content:""}},o=a=>a?new Date(a).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}):"N/A",s=a=>{if(!a)return"";const t=a.trim();if(t.includes(":")){const l=t.split(":");if(l.length>=2)return`${l[0].padStart(2,"0")}:${l[1].padStart(2,"0")}`}return t};return Q(()=>{P()}),(a,t)=>(n(),u("div",fe,[e("div",ye,[t[19]||(t[19]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Gestion des √âv√©nements"),e("p",{class:"text-gray-600 mt-1"},"Cr√©ez et g√©rez les √©v√©nements du centre")],-1)),e("button",{onClick:t[0]||(t[0]=l=>{p.value=!0,m.value=null}),class:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105"},[...t[18]||(t[18]=[e("i",{class:"fas fa-plus"},null,-1),e("span",null,"Nouvel √©v√©nement",-1)])])]),d.value?(n(),u("div",he,[e("div",we,[t[20]||(t[20]=e("i",{class:"fas fa-exclamation-circle"},null,-1)),e("span",null,r(d.value),1)]),d.value.includes("serveur")||d.value.includes("connecter")?(n(),u("button",{key:0,onClick:t[1]||(t[1]=()=>P()),class:"mt-3 text-sm text-red-600 hover:text-red-800 underline"}," R√©essayer ")):x("",!0)])):x("",!0),p.value?(n(),u("div",$e,[e("h3",ke,r(m.value?"Modifier l'√©v√©nement":"Nouvel √©v√©nement"),1),e("form",{onSubmit:Z(j,["prevent"]),class:"space-y-6",novalidate:""},[e("div",_e,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Titre *",-1)),R(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>i.value.title=l),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Titre de l'√©v√©nement"},null,512),[[N,i.value.title]])]),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de d√©but *",-1)),R(e("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>i.value.startDate=l),type:"date",required:"",min:new Date().toISOString().split("T")[0],class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",onInput:t[4]||(t[4]=l=>i.value.startDate=l.target.value)},null,40,De),[[N,i.value.startDate]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Heure de d√©but *",-1)),R(e("input",{"onUpdate:modelValue":t[5]||(t[5]=l=>i.value.startTime=l),type:"time",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",onInput:t[6]||(t[6]=l=>i.value.startTime=l.target.value)},null,544),[[N,i.value.startTime]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Type *",-1)),R(e("select",{"onUpdate:modelValue":t[7]||(t[7]=l=>i.value.type=l),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},[...t[24]||(t[24]=[G('<option value="conference">Conf√©rence</option><option value="workshop">Atelier</option><option value="seminar">S√©minaire</option><option value="webinar">Webinaire</option><option value="other">Autre</option>',5)])],512),[[H,i.value.type]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Lieu *",-1)),R(e("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>i.value.location=l),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Lieu de l'√©v√©nement"},null,512),[[N,i.value.location]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Image",-1)),e("input",{onChange:t[9]||(t[9]=l=>T(l)),type:"file",accept:"image/*",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,32),t[29]||(t[29]=e("p",{class:"text-xs text-gray-500 mt-1"},"Formats accept√©s: JPEG, PNG, JPG, GIF (max 2MB)",-1)),b.value?(n(),u("div",Ce,[e("img",{src:b.value,alt:"Preview",class:"w-32 h-32 object-cover rounded-lg border border-gray-200"},null,8,Ee)])):m.value&&i.value.image?(n(),u("div",Ae,[e("img",{src:i.value.image,alt:"Image actuelle",class:"w-32 h-32 object-cover rounded-lg border border-gray-200"},null,8,je),t[27]||(t[27]=e("p",{class:"text-xs text-gray-500 mt-1"},"Image actuelle",-1))])):x("",!0)])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description *",-1)),R(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=l=>i.value.description=l),required:"",rows:"4",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none",placeholder:"Description de l'√©v√©nement..."},null,512),[[N,i.value.description]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Contenu d√©taill√©",-1)),R(e("textarea",{"onUpdate:modelValue":t[11]||(t[11]=l=>i.value.content=l),rows:"6",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none",placeholder:"Contenu d√©taill√© de l'√©v√©nement..."},null,512),[[N,i.value.content]])]),e("div",Re,[e("div",null,[t[32]||(t[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de fin",-1)),R(e("input",{"onUpdate:modelValue":t[12]||(t[12]=l=>i.value.endDate=l),type:"date",min:i.value.startDate||new Date().toISOString().split("T")[0],class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",onInput:t[13]||(t[13]=l=>i.value.endDate=l.target.value)},null,40,Te),[[N,i.value.endDate]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Heure de fin",-1)),R(e("input",{"onUpdate:modelValue":t[14]||(t[14]=l=>i.value.endTime=l),type:"time",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",onInput:t[15]||(t[15]=l=>i.value.endTime=l.target.value)},null,544),[[N,i.value.endTime]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Adresse compl√®te",-1)),R(e("input",{"onUpdate:modelValue":t[16]||(t[16]=l=>i.value.address=l),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Adresse compl√®te..."},null,512),[[N,i.value.address]])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Inscription requise",-1)),e("div",Se,[e("label",Pe,[R(e("input",{"onUpdate:modelValue":t[17]||(t[17]=l=>i.value.registrationRequired=l),type:"checkbox",class:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[de,i.value.registrationRequired]]),t[35]||(t[35]=e("span",{class:"text-sm text-gray-700"},"Oui",-1))])])])]),e("div",Ne,[e("button",{type:"submit",disabled:c.value,class:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[c.value?(n(),u("i",Ve)):x("",!0),e("span",null,r(c.value?"Enregistrement...":m.value?"Modifier":"Cr√©er"),1)],8,Fe),e("button",{type:"button",onClick:A,disabled:c.value,class:"px-6 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"}," Annuler ",8,Ie)])],32)])):x("",!0),e("div",ze,[c.value&&h.value.length===0?(n(),u("div",Le,[...t[37]||(t[37]=[e("i",{class:"fas fa-spinner fa-spin text-3xl text-blue-600 mb-4"},null,-1),e("p",{class:"text-gray-600"},"Chargement des √©v√©nements...",-1)])])):(n(),u("div",Me,[e("table",Ue,[t[41]||(t[41]=e("thead",{class:"bg-gradient-to-r from-blue-600 to-blue-700 text-white"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-sm font-semibold"},"Titre"),e("th",{class:"px-6 py-4 text-left text-sm font-semibold"},"Date"),e("th",{class:"px-6 py-4 text-left text-sm font-semibold"},"Type"),e("th",{class:"px-6 py-4 text-left text-sm font-semibold"},"Lieu"),e("th",{class:"px-6 py-4 text-center text-sm font-semibold"},"Actions")])],-1)),e("tbody",Ge,[(n(!0),u(M,null,U(h.value,l=>(n(),u("tr",{key:l.id,class:"hover:bg-gray-50 transition-colors"},[e("td",qe,[e("div",Oe,r(l.title),1),e("div",Be,r(l.description?.substring(0,50))+"...",1)]),e("td",Je,[e("div",null,r(o(l.startDate)),1),l.startTime?(n(),u("div",Ye,r(s(l.startTime)),1)):x("",!0)]),e("td",He,[e("span",We,r(l.type),1)]),e("td",Qe,r(l.location),1),e("td",Ke,[e("div",Xe,[e("button",{onClick:$=>D(l),disabled:c.value,class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors disabled:opacity-50",title:"Modifier"},[...t[38]||(t[38]=[e("i",{class:"fas fa-edit"},null,-1)])],8,Ze),e("button",{onClick:$=>C(l.id),disabled:c.value,class:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"Supprimer"},[...t[39]||(t[39]=[e("i",{class:"fas fa-trash"},null,-1)])],8,et)])])]))),128)),h.value.length===0&&!c.value?(n(),u("tr",tt,[...t[40]||(t[40]=[e("td",{colspan:"5",class:"px-6 py-12 text-center text-gray-500"},[e("i",{class:"fas fa-calendar-times text-4xl mb-3 text-gray-300"}),e("p",null,"Aucun √©v√©nement pour le moment")],-1)])])):x("",!0)])])]))])]))}}),at={class:"space-y-6"},ot={class:"bg-gradient-to-r from-blue-600 via-indigo-600 to-blue-700 rounded-2xl shadow-xl overflow-hidden"},rt={class:"p-4 sm:p-6 lg:p-8"},nt={class:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 lg:gap-6"},it={class:"flex items-center gap-2 sm:gap-4 flex-shrink-0"},ut={class:"bg-white/10 backdrop-blur-sm rounded-xl px-3 py-2 sm:px-4 border border-white/20"},dt={class:"text-xl sm:text-2xl font-bold text-white"},ct={class:"bg-white/10 backdrop-blur-sm rounded-xl px-3 py-2 sm:px-4 border border-white/20"},pt={class:"text-xl sm:text-2xl font-bold text-yellow-300"},gt={class:"mt-4 sm:mt-6 flex flex-col sm:flex-row items-stretch sm:items-end gap-3"},vt={class:"flex-1 min-w-0"},mt={class:"relative"},bt=["value"],xt={class:"flex-1 min-w-0 sm:max-w-[200px]"},ft={class:"relative"},yt={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl"},ht={class:"flex items-center gap-2"},wt={key:1,class:"text-center py-12"},$t={key:2,class:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden"},kt={class:"overflow-x-auto"},_t={class:"w-full min-w-[800px]"},Dt={class:"bg-white divide-y divide-gray-100"},Ct={class:"px-3 sm:px-4 lg:px-6 py-3 sm:py-4"},Et={class:"flex items-center gap-2 sm:gap-3 min-w-0"},At={class:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold text-xs sm:text-sm shadow-md flex-shrink-0"},jt={class:"min-w-0 flex-1"},Rt={class:"font-semibold text-gray-900 group-hover:text-blue-600 transition-colors truncate text-sm sm:text-base"},Tt={key:0,class:"text-xs text-gray-500 mt-0.5 truncate"},St={class:"px-3 sm:px-4 lg:px-6 py-3 sm:py-4 min-w-0"},Pt={class:"space-y-1"},Nt={class:"flex items-center gap-1.5 sm:gap-2 text-gray-700 min-w-0"},Ft={class:"text-xs sm:text-sm truncate"},Vt={key:0,class:"flex items-center gap-1.5 sm:gap-2 text-gray-600"},It={class:"text-xs truncate"},zt={key:1,class:"text-xs text-gray-400"},Lt={class:"px-3 sm:px-4 lg:px-6 py-3 sm:py-4 hidden md:table-cell min-w-0"},Mt={class:"flex items-center gap-1.5 sm:gap-2 min-w-0"},Ut={class:"text-xs sm:text-sm text-gray-700 truncate"},Gt={class:"px-3 sm:px-4 lg:px-6 py-3 sm:py-4 min-w-0"},qt=["onMouseenter"],Ot={class:"inline-flex items-center gap-1.5 sm:gap-2 px-2 sm:px-3 py-1 sm:py-1.5 bg-blue-50 rounded-lg border border-blue-200 max-w-full cursor-help"},Bt={class:"text-xs sm:text-sm font-medium text-blue-700 truncate"},Jt={key:0,class:"absolute z-[100] bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg shadow-xl whitespace-normal max-w-xs text-center pointer-events-none",style:{"min-width":"150px"}},Yt={class:"px-3 sm:px-4 lg:px-6 py-3 sm:py-4"},Ht={class:"flex justify-center"},Wt={class:"hidden sm:inline"},Qt={class:"sm:hidden"},Kt={class:"px-3 sm:px-4 lg:px-6 py-3 sm:py-4 hidden lg:table-cell"},Xt={class:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm text-gray-600 whitespace-nowrap"},Zt={class:"px-3 sm:px-4 lg:px-6 py-3 sm:py-4"},es={class:"flex items-center justify-center gap-1 sm:gap-1.5 flex-wrap"},ts=["onClick","disabled"],ss=["onClick","disabled"],ls=["onClick"],as=["onClick","disabled"],os={key:0},rs={class:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},ns={class:"p-6 border-b border-gray-200"},is={class:"flex items-center justify-between"},us={class:"p-6 space-y-4"},ds={class:"text-gray-900 font-semibold"},cs={class:"text-gray-900"},ps={key:0},gs={class:"text-gray-900"},vs={key:1},ms={class:"text-gray-900"},bs={key:2},xs={class:"text-gray-900"},fs={class:"text-gray-900"},ys={key:3},hs={class:"text-gray-900"},ws={class:"text-gray-900"},ie=5e3,$s=W({__name:"DashboardEventRegistrations",setup(S){const w=le.useToast(),p=v([]),m=v([]),h=v(!1),c=v(!1),d=v(null),k=v(""),b=v(""),i=v(null),y=v(null),P=z(()=>p.value.filter(o=>o.status==="pending").length),T=v(null),j=async(o=!1)=>{if(!(!o&&T.value&&Date.now()-T.value<ie&&m.value.length>0))try{const s=await J.getEvents({limit:100});m.value=s.data,T.value=Date.now()}catch(s){console.error("Erreur lors du chargement des √©v√©nements:",s)}},f=async(o=!1)=>{if(!(!o&&!k.value&&!b.value&&T.value&&Date.now()-T.value<ie&&p.value.length>0)&&!h.value){h.value=!0,d.value=null;try{const s=await J.getAllRegistrations({eventId:k.value||void 0,status:b.value||void 0,limit:100});p.value=s.data,T.value=Date.now()}catch(s){console.error("Erreur lors du chargement des inscriptions:",s),d.value=s.message||"Erreur lors du chargement des inscriptions",p.value=[]}finally{h.value=!1}}},g=o=>o?m.value.find(a=>a.id==o)?.title||`√âv√©nement #${o}`:"N/A",E=(o,s)=>o?o.length<=s?o:o.substring(0,s)+"...":"-",_=async(o,s)=>{if(confirm(`√ätes-vous s√ªr de vouloir ${s==="confirmed"?"confirmer":"annuler"} cette inscription ?`)){c.value=!0,d.value=null;try{await J.updateRegistrationStatus(o,s),await f(!0);const a={confirmed:"confirm√©e",cancelled:"annul√©e",pending:"mise en attente"};w.open({message:`‚úÖ Inscription ${a[s]||"mise √† jour"} avec succ√®s !`,type:"success",position:"top-right",duration:5e3}),window.dispatchEvent(new CustomEvent("dashboard:update-notifications"))}catch(a){console.error("Erreur lors de la mise √† jour:",a);const t=a.message||"Erreur lors de la mise √† jour";d.value=t,w.open({message:`‚ùå ${t}`,type:"error",position:"top-right",duration:6e3})}finally{c.value=!1}}},D=async o=>{if(confirm("√ätes-vous s√ªr de vouloir supprimer cette inscription ?")){c.value=!0,d.value=null;try{await J.deleteRegistration(o),await f(!0),w.open({message:"‚úÖ Inscription supprim√©e avec succ√®s !",type:"success",position:"top-right",duration:5e3}),window.dispatchEvent(new CustomEvent("dashboard:update-notifications"))}catch(s){console.error("Erreur lors de la suppression:",s);const a=s.message||"Erreur lors de la suppression";d.value=a,w.open({message:`‚ùå ${a}`,type:"error",position:"top-right",duration:6e3})}finally{c.value=!1}}},C=o=>{i.value=o},A=o=>{if(!o)return"-";try{const s=new Date(o);return isNaN(s.getTime())?o:s.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return o}};return Q(async()=>{await Promise.all([j(),f()])}),(o,s)=>(n(),u("div",at,[e("div",ot,[e("div",rt,[e("div",nt,[s[9]||(s[9]=G('<div class="flex items-center gap-3 sm:gap-4 min-w-0 flex-1"><div class="w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-white/20 backdrop-blur-sm flex items-center justify-center shadow-lg flex-shrink-0"><i class="fas fa-user-check text-white text-xl sm:text-2xl"></i></div><div class="min-w-0 flex-1"><h2 class="text-xl sm:text-2xl lg:text-3xl font-bold text-white mb-1 truncate">Inscriptions aux √âv√©nements</h2><p class="text-blue-100 text-xs sm:text-sm font-medium truncate">G√©rez et suivez toutes les inscriptions</p></div></div>',1)),e("div",it,[e("div",ut,[s[7]||(s[7]=e("div",{class:"text-xs text-blue-100 font-medium mb-0.5"},"Total",-1)),e("div",dt,r(p.value.length),1)]),e("div",ct,[s[8]||(s[8]=e("div",{class:"text-xs text-blue-100 font-medium mb-0.5"},"En attente",-1)),e("div",pt,r(P.value),1)])])]),e("div",gt,[e("div",vt,[s[12]||(s[12]=e("label",{class:"block text-xs font-semibold text-blue-100 mb-2"},"Filtrer par √©v√©nement",-1)),e("div",mt,[s[11]||(s[11]=e("i",{class:"fas fa-calendar-alt absolute left-3 top-1/2 transform -translate-y-1/2 text-blue-200 text-sm z-10"},null,-1)),R(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>k.value=a),onChange:s[1]||(s[1]=()=>f(!0)),class:"w-full pl-10 pr-4 py-2.5 bg-white/90 backdrop-blur-sm border border-white/30 rounded-xl text-gray-900 font-medium text-sm focus:ring-2 focus:ring-white/50 focus:border-white transition-all shadow-sm appearance-none"},[s[10]||(s[10]=e("option",{value:""},"Tous les √©v√©nements",-1)),(n(!0),u(M,null,U(m.value,a=>(n(),u("option",{key:a.id,value:a.id},r(E(a.title,30)),9,bt))),128))],544),[[H,k.value]])])]),e("div",xt,[s[15]||(s[15]=e("label",{class:"block text-xs font-semibold text-blue-100 mb-2"},"Filtrer par statut",-1)),e("div",ft,[s[14]||(s[14]=e("i",{class:"fas fa-filter absolute left-3 top-1/2 transform -translate-y-1/2 text-blue-200 text-sm z-10"},null,-1)),R(e("select",{"onUpdate:modelValue":s[2]||(s[2]=a=>b.value=a),onChange:s[3]||(s[3]=()=>f(!0)),class:"w-full pl-10 pr-4 py-2.5 bg-white/90 backdrop-blur-sm border border-white/30 rounded-xl text-gray-900 font-medium text-sm focus:ring-2 focus:ring-white/50 focus:border-white transition-all shadow-sm appearance-none"},[...s[13]||(s[13]=[e("option",{value:""},"Tous les statuts",-1),e("option",{value:"pending"},"En attente",-1),e("option",{value:"confirmed"},"Confirm√©",-1),e("option",{value:"cancelled"},"Annul√©",-1)])],544),[[H,b.value]])])])])])]),d.value?(n(),u("div",yt,[e("div",ht,[s[16]||(s[16]=e("i",{class:"fas fa-exclamation-circle"},null,-1)),e("span",null,r(d.value),1)])])):x("",!0),h.value?(n(),u("div",wt,[...s[17]||(s[17]=[e("i",{class:"fas fa-spinner fa-spin text-4xl text-blue-600 mb-4"},null,-1),e("p",{class:"text-gray-600"},"Chargement des inscriptions...",-1)])])):(n(),u("div",$t,[e("div",kt,[e("table",_t,[s[29]||(s[29]=e("thead",{class:"bg-gradient-to-r from-blue-600 to-indigo-600"},[e("tr",null,[e("th",{class:"px-3 sm:px-4 lg:px-6 py-3 sm:py-4 text-left text-xs sm:text-sm font-bold text-white uppercase tracking-wider whitespace-nowrap"},[e("div",{class:"flex items-center gap-1.5 sm:gap-2"},[e("i",{class:"fas fa-user text-xs sm:text-sm"}),e("span",{class:"hidden sm:inline"},"Participant"),e("span",{class:"sm:hidden"},"Part.")])]),e("th",{class:"px-3 sm:px-4 lg:px-6 py-3 sm:py-4 text-left text-xs sm:text-sm font-bold text-white uppercase tracking-wider whitespace-nowrap"},[e("div",{class:"flex items-center gap-1.5 sm:gap-2"},[e("i",{class:"fas fa-envelope text-xs sm:text-sm"}),e("span",null,"Contact")])]),e("th",{class:"px-3 sm:px-4 lg:px-6 py-3 sm:py-4 text-left text-xs sm:text-sm font-bold text-white uppercase tracking-wider whitespace-nowrap hidden md:table-cell"},[e("div",{class:"flex items-center gap-1.5 sm:gap-2"},[e("i",{class:"fas fa-building text-xs sm:text-sm"}),e("span",null,"Organisation")])]),e("th",{class:"px-3 sm:px-4 lg:px-6 py-3 sm:py-4 text-left text-xs sm:text-sm font-bold text-white uppercase tracking-wider whitespace-nowrap"},[e("div",{class:"flex items-center gap-1.5 sm:gap-2"},[e("i",{class:"fas fa-calendar-alt text-xs sm:text-sm"}),e("span",{class:"hidden lg:inline"},"√âv√©nement"),e("span",{class:"lg:hidden"},"√âv√©n.")])]),e("th",{class:"px-3 sm:px-4 lg:px-6 py-3 sm:py-4 text-center text-xs sm:text-sm font-bold text-white uppercase tracking-wider whitespace-nowrap"},[e("div",{class:"flex items-center justify-center gap-1.5 sm:gap-2"},[e("i",{class:"fas fa-info-circle text-xs sm:text-sm"}),e("span",null,"Statut")])]),e("th",{class:"px-3 sm:px-4 lg:px-6 py-3 sm:py-4 text-left text-xs sm:text-sm font-bold text-white uppercase tracking-wider whitespace-nowrap hidden lg:table-cell"},[e("div",{class:"flex items-center gap-1.5 sm:gap-2"},[e("i",{class:"fas fa-clock text-xs sm:text-sm"}),e("span",null,"Date")])]),e("th",{class:"px-3 sm:px-4 lg:px-6 py-3 sm:py-4 text-center text-xs sm:text-sm font-bold text-white uppercase tracking-wider whitespace-nowrap"},[e("div",{class:"flex items-center justify-center gap-1.5 sm:gap-2"},[e("i",{class:"fas fa-cog text-xs sm:text-sm"}),e("span",{class:"hidden sm:inline"},"Actions")])])])],-1)),e("tbody",Dt,[(n(!0),u(M,null,U(p.value,(a,t)=>(n(),u("tr",{key:a.id,class:L(["hover:bg-gradient-to-r hover:from-blue-50/50 hover:to-indigo-50/50 transition-all duration-200 group",{"bg-gray-50/50":t%2===1}])},[e("td",Ct,[e("div",Et,[e("div",At,r((a.firstName?.[0]||"")+(a.lastName?.[0]||"")),1),e("div",jt,[e("div",Rt,r(a.firstName)+" "+r(a.lastName),1),a.position?(n(),u("div",Tt,r(a.position),1)):x("",!0)])])]),e("td",St,[e("div",Pt,[e("div",Nt,[s[18]||(s[18]=e("i",{class:"fas fa-envelope text-xs text-gray-400 flex-shrink-0"},null,-1)),e("span",Ft,r(a.email),1)]),a.phone?(n(),u("div",Vt,[s[19]||(s[19]=e("i",{class:"fas fa-phone text-xs text-gray-400 flex-shrink-0"},null,-1)),e("span",It,r(a.phone),1)])):(n(),u("div",zt,"-"))])]),e("td",Lt,[e("div",Mt,[s[20]||(s[20]=e("i",{class:"fas fa-building text-gray-400 text-xs sm:text-sm flex-shrink-0"},null,-1)),e("span",Ut,r(a.organization||"-"),1)])]),e("td",Gt,[e("div",{class:"relative inline-block",onMouseenter:l=>y.value=a.eventId,onMouseleave:s[4]||(s[4]=l=>y.value=null)},[e("div",Ot,[s[21]||(s[21]=e("i",{class:"fas fa-calendar-alt text-blue-600 text-xs flex-shrink-0"},null,-1)),e("span",Bt,r(E(g(a.eventId),16)),1)]),y.value===a.eventId&&g(a.eventId).length>16?(n(),u("div",Jt,[I(r(g(a.eventId))+" ",1),s[22]||(s[22]=e("div",{class:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-1"},[e("div",{class:"border-4 border-transparent border-t-gray-900"})],-1))])):x("",!0)],40,qt)]),e("td",Yt,[e("div",Ht,[e("span",{class:L(["px-2 sm:px-3 py-1 sm:py-1.5 rounded-full text-xs font-bold shadow-sm inline-flex items-center gap-1 sm:gap-1.5 whitespace-nowrap",a.status==="confirmed"?"bg-gradient-to-r from-green-500 to-emerald-500 text-white":a.status==="cancelled"?"bg-gradient-to-r from-red-500 to-rose-500 text-white":"bg-gradient-to-r from-yellow-400 to-amber-500 text-white"])},[e("i",{class:L(["fas text-xs flex-shrink-0",a.status==="confirmed"?"fa-check-circle":a.status==="cancelled"?"fa-times-circle":"fa-clock"])},null,2),e("span",Wt,r(a.status==="confirmed"?"Confirm√©":a.status==="cancelled"?"Annul√©":"En attente"),1),e("span",Qt,r(a.status==="confirmed"?"OK":a.status==="cancelled"?"Ann.":"Att."),1)],2)])]),e("td",Kt,[e("div",Xt,[s[23]||(s[23]=e("i",{class:"fas fa-clock text-gray-400 text-xs flex-shrink-0"},null,-1)),e("span",null,r(A(a.createdAt)),1)])]),e("td",Zt,[e("div",es,[a.status!=="confirmed"?(n(),u("button",{key:0,onClick:l=>_(a.id,"confirmed"),disabled:c.value,class:"p-2 sm:p-2.5 text-green-600 hover:bg-green-50 rounded-lg transition-all duration-200 disabled:opacity-50 hover:scale-110 hover:shadow-md",title:"Confirmer"},[...s[24]||(s[24]=[e("i",{class:"fas fa-check text-xs sm:text-sm"},null,-1)])],8,ts)):x("",!0),a.status!=="cancelled"?(n(),u("button",{key:1,onClick:l=>_(a.id,"cancelled"),disabled:c.value,class:"p-2 sm:p-2.5 text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200 disabled:opacity-50 hover:scale-110 hover:shadow-md",title:"Annuler"},[...s[25]||(s[25]=[e("i",{class:"fas fa-times text-xs sm:text-sm"},null,-1)])],8,ss)):x("",!0),e("button",{onClick:l=>C(a),class:"p-2 sm:p-2.5 text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200 hover:scale-110 hover:shadow-md",title:"Voir les d√©tails"},[...s[26]||(s[26]=[e("i",{class:"fas fa-eye text-xs sm:text-sm"},null,-1)])],8,ls),e("button",{onClick:l=>D(a.id),disabled:c.value,class:"p-2 sm:p-2.5 text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200 disabled:opacity-50 hover:scale-110 hover:shadow-md",title:"Supprimer"},[...s[27]||(s[27]=[e("i",{class:"fas fa-trash text-xs sm:text-sm"},null,-1)])],8,as)])])],2))),128)),p.value.length===0?(n(),u("tr",os,[...s[28]||(s[28]=[e("td",{colspan:"7",class:"px-6 py-16 text-center"},[e("div",{class:"flex flex-col items-center gap-3"},[e("div",{class:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center"},[e("i",{class:"fas fa-inbox text-2xl text-gray-400"})]),e("p",{class:"text-gray-500 font-medium"},"Aucune inscription trouv√©e"),e("p",{class:"text-sm text-gray-400"},"Les inscriptions appara√Ætront ici")])],-1)])])):x("",!0)])])])])),i.value?(n(),u("div",{key:3,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:s[6]||(s[6]=Z(a=>i.value=null,["self"]))},[e("div",rs,[e("div",ns,[e("div",is,[s[31]||(s[31]=e("h3",{class:"text-2xl font-bold text-gray-900"},"D√©tails de l'inscription",-1)),e("button",{onClick:s[5]||(s[5]=a=>i.value=null),class:"p-2 text-gray-400 hover:text-gray-600 rounded-lg transition-colors"},[...s[30]||(s[30]=[e("i",{class:"fas fa-times"},null,-1)])])])]),e("div",us,[e("div",null,[s[32]||(s[32]=e("label",{class:"text-sm font-medium text-gray-600"},"Nom complet",-1)),e("p",ds,r(i.value.firstName)+" "+r(i.value.lastName),1)]),e("div",null,[s[33]||(s[33]=e("label",{class:"text-sm font-medium text-gray-600"},"Email",-1)),e("p",cs,r(i.value.email),1)]),i.value.phone?(n(),u("div",ps,[s[34]||(s[34]=e("label",{class:"text-sm font-medium text-gray-600"},"T√©l√©phone",-1)),e("p",gs,r(i.value.phone),1)])):x("",!0),i.value.organization?(n(),u("div",vs,[s[35]||(s[35]=e("label",{class:"text-sm font-medium text-gray-600"},"Organisation",-1)),e("p",ms,r(i.value.organization),1)])):x("",!0),i.value.position?(n(),u("div",bs,[s[36]||(s[36]=e("label",{class:"text-sm font-medium text-gray-600"},"Poste",-1)),e("p",xs,r(i.value.position),1)])):x("",!0),e("div",null,[s[37]||(s[37]=e("label",{class:"text-sm font-medium text-gray-600"},"√âv√©nement",-1)),e("p",fs,r(g(i.value.eventId)),1)]),e("div",null,[s[38]||(s[38]=e("label",{class:"text-sm font-medium text-gray-600"},"Statut",-1)),e("span",{class:L(["inline-block px-3 py-1 rounded-full text-xs font-semibold",i.value.status==="confirmed"?"bg-green-100 text-green-800":i.value.status==="cancelled"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"])},r(i.value.status==="confirmed"?"Confirm√©":i.value.status==="cancelled"?"Annul√©":"En attente"),3)]),i.value.notes?(n(),u("div",ys,[s[39]||(s[39]=e("label",{class:"text-sm font-medium text-gray-600"},"Notes",-1)),e("p",hs,r(i.value.notes),1)])):x("",!0),e("div",null,[s[40]||(s[40]=e("label",{class:"text-sm font-medium text-gray-600"},"Date d'inscription",-1)),e("p",ws,r(A(i.value.createdAt)),1)])])])])):x("",!0)]))}}),ks={class:"space-y-6"},_s={class:"flex items-center justify-between"},Ds={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl mb-4"},Cs={class:"flex items-center gap-2"},Es={key:1,class:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100"},As={class:"text-xl font-bold text-gray-900 mb-6"},js={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Rs={key:0,class:"mt-3"},Ts=["src"],Ss={key:1,class:"mt-3"},Ps=["src"],Ns={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Fs={key:0,class:"mt-3"},Vs=["src"],Is={key:1,class:"mt-3"},zs=["src"],Ls={class:"flex gap-4"},Ms=["disabled"],Us={key:0},Gs={key:1},qs=["disabled"],Os={class:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden"},Bs={class:"overflow-x-auto"},Js={class:"w-full"},Ys={class:"divide-y divide-gray-200"},Hs={key:0},Ws={class:"px-6 py-4"},Qs={class:"font-medium text-gray-900"},Ks={class:"px-6 py-4"},Xs={class:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium"},Zs={class:"px-6 py-4 text-gray-600"},el={class:"px-6 py-4"},tl={class:"flex items-center justify-center gap-2"},sl=["onClick","disabled"],ll=["onClick","disabled"],al={key:1},ol=5e3,rl=W({__name:"DashboardActualites",setup(S){const w=v(!1),p=v(null),m=v([]),h=v(null),c=v(null),d=v(null),k=v(null),b=v(!1),i=v(null),y=v({title:"",category:"",publishDate:"",summary:"",content:"",image:"",author:"Admin",authorPhoto:"",readTime:5}),P=v(""),T=v(""),j=v(""),f=t=>{const l=t.target;if(l.files&&l.files[0]){h.value=l.files[0];const $=new FileReader;$.onload=F=>{c.value=F.target?.result},$.readAsDataURL(h.value)}},g=t=>{const l=t.target;if(l.files&&l.files[0]){d.value=l.files[0];const $=new FileReader;$.onload=F=>{k.value=F.target?.result},$.readAsDataURL(d.value)}},E=v(null),_=async(t=!1)=>{if(!(!t&&E.value&&Date.now()-E.value<ol&&m.value.length>0)&&!b.value){b.value=!0,i.value=null;try{console.log("üîÑ Chargement des actualit√©s...");const l=await te.getActualities({limit:100});console.log("‚úÖ R√©ponse re√ßue:",l),l&&l.data?(console.log(`üìä ${l.data.length} actualit√©(s) charg√©e(s)`),m.value=l.data,E.value=Date.now()):(console.warn("‚ö†Ô∏è Aucune donn√©e dans la r√©ponse:",l),m.value=[],i.value="Aucune donn√©e re√ßue du serveur")}catch(l){console.error("‚ùå Erreur compl√®te lors du chargement:",l),console.error("D√©tails:",{message:l.message,status:l.status,errors:l.errors,stack:l.stack}),l.status===500?i.value="Erreur serveur. V√©rifiez que le backend est d√©marr√© et que la base de donn√©es est accessible.":l.status===404?i.value="Endpoint non trouv√©. V√©rifiez la configuration de l'API.":l.status===0||l.message?.includes("fetch")||l.message?.includes("Failed to fetch")?i.value="Impossible de se connecter au serveur. V√©rifiez que le backend est accessible.":i.value=l.message||(l.errors?JSON.stringify(l.errors):"Erreur lors du chargement des actualit√©s"),m.value=[]}finally{b.value=!1}}},D=async()=>{b.value=!0,i.value=null;try{const t=P.value.split(`
`).map(V=>V.trim()).filter(V=>V.length>0),l=T.value.split(`
`).map(V=>V.trim()).filter(V=>V.length>0),$=j.value.split(",").map(V=>V.trim()).filter(V=>V.length>0),F={title:y.value.title.trim(),summary:y.value.summary.trim(),content:y.value.content.trim(),category:y.value.category.trim(),publishDate:y.value.publishDate,author:y.value.author.trim(),readTime:y.value.readTime,status:"published",learningPoints:t,keyPoints:l,tags:$};p.value?await te.updateActuality(p.value.id,F,h.value||void 0,d.value||void 0):await te.createActuality(F,h.value||void 0,d.value||void 0),await _(!0),s(),window.dispatchEvent(new CustomEvent("dashboard:update-stats"))}catch(t){if(console.error("Erreur lors de la sauvegarde:",t),i.value=t.message||"Erreur lors de la sauvegarde",t.errors){const l=Object.values(t.errors).flat().join(", ");i.value=`Erreurs de validation: ${l}`}}finally{b.value=!1}},C=t=>{if(!t||typeof t!="string")return"";const l=t.trim();if(!l)return"";try{if(/^\d{4}-\d{2}-\d{2}$/.test(l))return l;const $=new Date(l);if(isNaN($.getTime())){const q=l.split("-");if(q.length===3){const B=parseInt(q[0],10),Y=parseInt(q[1],10),K=parseInt(q[2],10);if(!isNaN(B)&&!isNaN(Y)&&!isNaN(K)){const ne=new Date(B,Y-1,K);if(ne.getFullYear()===B&&ne.getMonth()===Y-1&&ne.getDate()===K)return`${B}-${String(Y).padStart(2,"0")}-${String(K).padStart(2,"0")}`}}return""}const F=$.getFullYear(),V=String($.getMonth()+1).padStart(2,"0"),O=String($.getDate()).padStart(2,"0");return`${F}-${V}-${O}`}catch($){return console.warn("Erreur lors de la normalisation de la date:",t,$),""}},A=t=>{try{p.value=t,y.value={title:t.title||"",category:t.category||"",publishDate:C(t.publishDate),summary:t.summary||"",content:t.content||"",image:t.image||"",author:t.author||"Admin",authorPhoto:t.authorPhoto||"",readTime:t.readTime||5},P.value=t.learningPoints?t.learningPoints.join(`
`):"",T.value=t.keyPoints?t.keyPoints.join(`
`):"",j.value=t.tags?t.tags.join(", "):"",h.value=null,c.value=t.image||null,d.value=null,k.value=t.authorPhoto||null,w.value=!0}catch(l){console.error("Erreur lors de l'√©dition de l'actualit√©:",l),i.value="Erreur lors du chargement des donn√©es de l'actualit√©"}},o=async t=>{if(confirm("√ätes-vous s√ªr de vouloir supprimer cette actualit√© ?")){b.value=!0,i.value=null;try{await te.deleteActuality(t),await _(!0),window.dispatchEvent(new CustomEvent("dashboard:update-stats"))}catch(l){console.error("Erreur lors de la suppression:",l),i.value=l.message||"Erreur lors de la suppression"}finally{b.value=!1}}},s=()=>{w.value=!1,p.value=null,h.value=null,c.value=null,d.value=null,k.value=null,P.value="",T.value="",j.value="",y.value={title:"",category:"",publishDate:"",summary:"",content:"",image:"",author:"Admin",authorPhoto:"",readTime:5},i.value=null},a=t=>t?new Date(t).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}):"N/A";return Q(()=>{_()}),(t,l)=>(n(),u("div",ks,[e("div",_s,[l[12]||(l[12]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Gestion des Actualit√©s"),e("p",{class:"text-gray-600 mt-1"},"Cr√©ez et g√©rez les actualit√©s du centre")],-1)),e("button",{onClick:l[0]||(l[0]=$=>{w.value=!0,p.value=null}),class:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105"},[...l[11]||(l[11]=[e("i",{class:"fas fa-plus"},null,-1),e("span",null,"Nouvelle actualit√©",-1)])])]),i.value?(n(),u("div",Ds,[e("div",Cs,[l[13]||(l[13]=e("i",{class:"fas fa-exclamation-circle"},null,-1)),e("span",null,r(i.value),1)]),i.value.includes("serveur")||i.value.includes("connecter")?(n(),u("button",{key:0,onClick:l[1]||(l[1]=()=>_()),class:"mt-3 text-sm text-red-600 hover:text-red-800 underline"}," R√©essayer ")):x("",!0)])):x("",!0),w.value?(n(),u("div",Es,[e("h3",As,r(p.value?"Modifier l'actualit√©":"Nouvelle actualit√©"),1),e("form",{onSubmit:Z(D,["prevent"]),class:"space-y-6"},[e("div",js,[e("div",null,[l[14]||(l[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Titre *",-1)),R(e("input",{"onUpdate:modelValue":l[2]||(l[2]=$=>y.value.title=$),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Titre de l'actualit√©"},null,512),[[N,y.value.title]])]),e("div",null,[l[16]||(l[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Cat√©gorie *",-1)),R(e("select",{"onUpdate:modelValue":l[3]||(l[3]=$=>y.value.category=$),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},[...l[15]||(l[15]=[G('<option value="">S√©lectionnez...</option><option value="Recherche">Recherche</option><option value="Formation">Formation</option><option value="Partenariat">Partenariat</option><option value="√âv√©nement">√âv√©nement</option>',5)])],512),[[H,y.value.category]])]),e("div",null,[l[18]||(l[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Image",-1)),e("input",{onChange:f,type:"file",accept:"image/*",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,32),l[19]||(l[19]=e("p",{class:"text-xs text-gray-500 mt-1"},"Formats accept√©s: JPEG, PNG, JPG, GIF (max 2MB)",-1)),c.value?(n(),u("div",Rs,[e("img",{src:c.value,alt:"Preview",class:"w-32 h-32 object-cover rounded-lg border border-gray-200"},null,8,Ts)])):p.value&&y.value.image?(n(),u("div",Ss,[e("img",{src:y.value.image,alt:"Image actuelle",class:"w-32 h-32 object-cover rounded-lg border border-gray-200"},null,8,Ps),l[17]||(l[17]=e("p",{class:"text-xs text-gray-500 mt-1"},"Image actuelle",-1))])):x("",!0)]),e("div",null,[l[20]||(l[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date de publication *",-1)),R(e("input",{"onUpdate:modelValue":l[4]||(l[4]=$=>y.value.publishDate=$),type:"date",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,512),[[N,y.value.publishDate]])])]),e("div",null,[l[21]||(l[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"R√©sum√© *",-1)),R(e("textarea",{"onUpdate:modelValue":l[5]||(l[5]=$=>y.value.summary=$),required:"",rows:"3",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none",placeholder:"R√©sum√© de l'actualit√©..."},null,512),[[N,y.value.summary]])]),e("div",null,[l[22]||(l[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Contenu *",-1)),R(e("textarea",{"onUpdate:modelValue":l[6]||(l[6]=$=>y.value.content=$),required:"",rows:"6",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none",placeholder:"Contenu complet de l'actualit√©..."},null,512),[[N,y.value.content]])]),e("div",null,[l[23]||(l[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Ce que vous apprendrez",-1)),l[24]||(l[24]=e("p",{class:"text-xs text-gray-500 mb-2"},"Ajoutez un point par ligne",-1)),R(e("textarea",{"onUpdate:modelValue":l[7]||(l[7]=$=>P.value=$),rows:"4",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none",placeholder:`Les derni√®res tendances en mati√®re de financement des PME
Comment pr√©parer un dossier de financement convaincant
Les diff√©rentes sources de financement disponibles
Les erreurs √† √©viter lors de la recherche de financement`},null,512),[[N,P.value]])]),e("div",null,[l[25]||(l[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Points cl√©s √† retenir",-1)),l[26]||(l[26]=e("p",{class:"text-xs text-gray-500 mb-2"},"Ajoutez un point par ligne",-1)),R(e("textarea",{"onUpdate:modelValue":l[8]||(l[8]=$=>T.value=$),rows:"4",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none",placeholder:`Comprendre les m√©canismes de financement adapt√©s aux PME
Identifier les opportunit√©s de croissance et de d√©veloppement
Optimiser la gestion financi√®re de votre entreprise
Acc√©der aux ressources et programmes disponibles`},null,512),[[N,T.value]])]),e("div",null,[l[27]||(l[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Mots-cl√©s (tags)",-1)),l[28]||(l[28]=e("p",{class:"text-xs text-gray-500 mb-2"},"S√©parez les tags par des virgules",-1)),R(e("input",{"onUpdate:modelValue":l[9]||(l[9]=$=>j.value=$),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Formation, PME, Financement, RDC"},null,512),[[N,j.value]])]),e("div",Ns,[e("div",null,[l[29]||(l[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Auteur *",-1)),R(e("input",{"onUpdate:modelValue":l[10]||(l[10]=$=>y.value.author=$),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Nom de l'auteur"},null,512),[[N,y.value.author]]),l[30]||(l[30]=e("p",{class:"text-xs text-gray-500 mt-1"},"Nom de la personne qui publie l'actualit√©",-1))]),e("div",null,[l[32]||(l[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Photo de l'auteur",-1)),e("input",{onChange:g,type:"file",accept:"image/*",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,32),l[33]||(l[33]=e("p",{class:"text-xs text-gray-500 mt-1"},"Formats accept√©s: JPEG, PNG, JPG, GIF (max 2MB)",-1)),k.value?(n(),u("div",Fs,[e("img",{src:k.value,alt:"Preview auteur",class:"w-24 h-24 object-cover rounded-full border border-gray-200"},null,8,Vs)])):p.value&&y.value.authorPhoto?(n(),u("div",Is,[e("img",{src:y.value.authorPhoto,alt:"Photo auteur actuelle",class:"w-24 h-24 object-cover rounded-full border border-gray-200"},null,8,zs),l[31]||(l[31]=e("p",{class:"text-xs text-gray-500 mt-1"},"Photo actuelle",-1))])):x("",!0)])]),e("div",Ls,[e("button",{type:"submit",disabled:b.value,class:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"},[b.value?(n(),u("span",Us,"Enregistrement...")):(n(),u("span",Gs,r(p.value?"Modifier":"Cr√©er"),1))],8,Ms),e("button",{type:"button",onClick:s,disabled:b.value,class:"px-6 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed"}," Annuler ",8,qs)])],32)])):x("",!0),e("div",Os,[e("div",Bs,[e("table",Js,[l[38]||(l[38]=e("thead",{class:"bg-gradient-to-r from-blue-600 to-blue-700 text-white"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-sm font-semibold"},"Titre"),e("th",{class:"px-6 py-4 text-left text-sm font-semibold"},"Cat√©gorie"),e("th",{class:"px-6 py-4 text-left text-sm font-semibold"},"Date"),e("th",{class:"px-6 py-4 text-center text-sm font-semibold"},"Actions")])],-1)),e("tbody",Ys,[b.value&&m.value.length===0?(n(),u("tr",Hs,[...l[34]||(l[34]=[e("td",{colspan:"4",class:"px-6 py-12 text-center text-gray-500"}," Chargement... ",-1)])])):x("",!0),(n(!0),u(M,null,U(m.value,$=>(n(),u("tr",{key:$.id,class:"hover:bg-gray-50 transition-colors"},[e("td",Ws,[e("div",Qs,r($.title),1)]),e("td",Ks,[e("span",Xs,r($.category),1)]),e("td",Zs,r(a($.publishDate)),1),e("td",el,[e("div",tl,[e("button",{onClick:F=>A($),disabled:b.value,class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[...l[35]||(l[35]=[e("i",{class:"fas fa-edit"},null,-1)])],8,sl),e("button",{onClick:F=>o($.id),disabled:b.value,class:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[...l[36]||(l[36]=[e("i",{class:"fas fa-trash"},null,-1)])],8,ll)])])]))),128)),!b.value&&m.value.length===0?(n(),u("tr",al,[...l[37]||(l[37]=[e("td",{colspan:"4",class:"px-6 py-12 text-center text-gray-500"}," Aucune actualit√© pour le moment ",-1)])])):x("",!0)])])])])]))}}),nl={class:"space-y-6"},il={class:"flex items-center justify-between"},ul={key:0,class:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100"},dl={key:0,class:"mt-3"},cl=["src"],pl={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},gl={class:"relative"},vl={id:"category-list"},ml=["value"],bl={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},xl={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},fl={class:"flex items-center gap-2"},yl={class:"flex gap-4"},hl=["disabled"],wl={key:0,class:"fas fa-spinner fa-spin"},$l=["disabled"],kl={key:1,class:"text-center py-12"},_l={key:2,class:"text-center py-12"},Dl={class:"text-gray-600 mb-6"},Cl={key:3,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},El={class:"aspect-square overflow-hidden"},Al=["src","alt"],jl={class:"p-4"},Rl={class:"font-medium text-gray-900 mb-1"},Tl={class:"text-sm text-gray-500"},Sl={key:0,class:"text-xs text-gray-400 mt-1"},Pl={class:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"},Nl=["onClick","disabled"],Fl={key:0,class:"col-span-full text-center py-12 text-gray-500"},Vl=5e3,Il=W({__name:"DashboardGallery",setup(S){const w=le.useToast(),p=v(!1),m=v([]),h=v(null),c=v(null),d=v(!1),k=v(!1),b=v(null),i=v([]),y=v({title:"",description:"",category:"",date:new Date().toISOString().split("T")[0],author:"Admin"}),P=A=>{const o=A.target;if(o.files&&o.files[0]){const s=o.files[0];if(s.size>2*1024*1024){b.value="Le fichier est trop volumineux. Taille maximale: 2MB",o.value="";return}h.value=s,b.value=null;const a=new FileReader;a.onload=t=>{c.value=t.target?.result},a.readAsDataURL(h.value)}},T=v(null),j=async(A=!1)=>{if(!(!A&&T.value&&Date.now()-T.value<Vl&&m.value.length>0)&&!d.value){d.value=!0,b.value=null;try{const o=await ee.getPhotos({limit:100});m.value=o.data,T.value=Date.now()}catch(o){console.error("Erreur lors du chargement des photos:",o),b.value=o.message||"Erreur lors du chargement de la galerie",m.value=[]}finally{d.value=!1}}},f=async()=>{try{const o=(await ee.getCategories()).map(t=>t.name||t.id),s=["√âv√©nements","√âquipe","Installations","Collaborations","Formations","Conf√©rences","Ateliers","R√©unions","C√©r√©monies","Activit√©s","Projets","Partenariats"],a=new Set([...s,...o]);i.value=Array.from(a).sort(),i.value.length===0&&(i.value=s)}catch(A){console.error("Erreur lors du chargement des cat√©gories:",A),i.value=["√âv√©nements","√âquipe","Installations","Collaborations","Formations","Conf√©rences","Ateliers","R√©unions","C√©r√©monies","Activit√©s","Projets","Partenariats"]}},g=async()=>{if(!h.value){b.value="Veuillez s√©lectionner une image",w.open({message:"‚ö†Ô∏è Veuillez s√©lectionner une image",type:"warning",position:"top-right",duration:4e3});return}if(!y.value.title||!y.value.category){b.value="Veuillez remplir tous les champs obligatoires",w.open({message:"‚ö†Ô∏è Veuillez remplir tous les champs obligatoires",type:"warning",position:"top-right",duration:4e3});return}k.value=!0,b.value=null;try{const A=await ee.uploadPhoto(h.value,{title:y.value.title,description:y.value.description||"",category:y.value.category,date:y.value.date,author:y.value.author});await j(!0),C(),w.open({message:"‚úÖ Photo ajout√©e √† la galerie avec succ√®s !",type:"success",position:"top-right",duration:5e3}),window.dispatchEvent(new CustomEvent("dashboard:update-stats"))}catch(A){console.error("Erreur lors de l'ajout de la photo:",A);const o=A.message||"Erreur lors de l'ajout de la photo";b.value=o,w.open({message:`‚ùå ${o}`,type:"error",position:"top-right",duration:6e3})}finally{k.value=!1}},E=async A=>{if(A&&confirm("√ätes-vous s√ªr de vouloir supprimer cette photo ?")){k.value=!0,b.value=null;try{await ee.deletePhoto(A),await j(!0),w.open({message:"‚úÖ Photo supprim√©e de la galerie avec succ√®s !",type:"success",position:"top-right",duration:5e3}),window.dispatchEvent(new CustomEvent("dashboard:update-stats"))}catch(o){console.error("Erreur lors de la suppression de la photo:",o);const s=o.message||"Erreur lors de la suppression de la photo";b.value=s,w.open({message:`‚ùå ${s}`,type:"error",position:"top-right",duration:6e3})}finally{k.value=!1}}},_=A=>A&&ee.getImageUrl(A)||"https://images.unsplash.com/photo-1540575467063-178a50c2df87?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",D=A=>{if(!A)return"";try{const o=new Date(A);return isNaN(o.getTime())?A:o.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:"numeric"})}catch{return A}},C=()=>{p.value=!1,h.value=null,c.value=null,b.value=null,y.value={title:"",description:"",category:"",date:new Date().toISOString().split("T")[0],author:"Admin"}};return Q(async()=>{await Promise.all([f(),j()])}),(A,o)=>(n(),u("div",nl,[e("div",il,[o[9]||(o[9]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Gestion de la Galerie"),e("p",{class:"text-gray-600 mt-1"},"Ajoutez et g√©rez les photos de la galerie")],-1)),e("button",{onClick:o[0]||(o[0]=s=>p.value=!0),class:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105"},[...o[8]||(o[8]=[e("i",{class:"fas fa-upload"},null,-1),e("span",null,"Ajouter des photos",-1)])])]),p.value?(n(),u("div",ul,[o[19]||(o[19]=e("h3",{class:"text-xl font-bold text-gray-900 mb-6"},"Ajouter une photo",-1)),e("form",{onSubmit:Z(g,["prevent"]),class:"space-y-6"},[e("div",null,[o[10]||(o[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Image *",-1)),e("input",{onChange:P,type:"file",accept:"image/*",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,32),o[11]||(o[11]=e("p",{class:"text-xs text-gray-500 mt-1"},"Formats accept√©s: JPEG, PNG, JPG, GIF (max 2MB)",-1)),c.value?(n(),u("div",dl,[e("img",{src:c.value,alt:"Preview",class:"w-48 h-48 object-cover rounded-lg border border-gray-200"},null,8,cl)])):x("",!0)]),e("div",pl,[e("div",null,[o[12]||(o[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Titre *",-1)),R(e("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>y.value.title=s),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Titre de la photo"},null,512),[[N,y.value.title]])]),e("div",null,[o[13]||(o[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Cat√©gorie *",-1)),e("div",gl,[R(e("input",{"onUpdate:modelValue":o[2]||(o[2]=s=>y.value.category=s),type:"text",list:"category-list",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Tapez ou s√©lectionnez une cat√©gorie...",required:""},null,512),[[N,y.value.category]]),e("datalist",vl,[(n(!0),u(M,null,U(i.value,s=>(n(),u("option",{key:s,value:s},r(s),9,ml))),128))])]),o[14]||(o[14]=e("p",{class:"text-xs text-gray-500 mt-1"},"Exemples: √âv√©nements, √âquipe, Installations, Collaborations, Formations, etc.",-1))])]),e("div",null,[o[15]||(o[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),R(e("textarea",{"onUpdate:modelValue":o[3]||(o[3]=s=>y.value.description=s),rows:"3",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all resize-none",placeholder:"Description de la photo (optionnel)"},null,512),[[N,y.value.description]])]),e("div",bl,[e("div",null,[o[16]||(o[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date *",-1)),R(e("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>y.value.date=s),type:"date",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,512),[[N,y.value.date]])]),e("div",null,[o[17]||(o[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Auteur *",-1)),R(e("input",{"onUpdate:modelValue":o[5]||(o[5]=s=>y.value.author=s),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Nom de l'auteur"},null,512),[[N,y.value.author]])])]),b.value?(n(),u("div",xl,[e("div",fl,[o[18]||(o[18]=e("i",{class:"fas fa-exclamation-circle"},null,-1)),e("span",null,r(b.value),1)])])):x("",!0),e("div",yl,[e("button",{type:"submit",disabled:k.value,class:"px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[k.value?(n(),u("i",wl)):x("",!0),e("span",null,r(k.value?"Ajout en cours...":"Ajouter"),1)],8,hl),e("button",{type:"button",onClick:C,disabled:k.value,class:"px-6 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-all duration-300 disabled:opacity-50"}," Annuler ",8,$l)])],32)])):x("",!0),d.value&&m.value.length===0?(n(),u("div",kl,[...o[20]||(o[20]=[e("i",{class:"fas fa-spinner fa-spin text-4xl text-blue-600 mb-4"},null,-1),e("p",{class:"text-gray-600"},"Chargement de la galerie...",-1)])])):b.value&&m.value.length===0?(n(),u("div",_l,[o[21]||(o[21]=e("i",{class:"fas fa-exclamation-triangle text-4xl text-red-600 mb-4"},null,-1)),o[22]||(o[22]=e("h3",{class:"text-xl font-bold text-gray-900 mb-2"},"Erreur",-1)),e("p",Dl,r(b.value),1),e("button",{onClick:o[6]||(o[6]=()=>j()),class:"bg-blue-500 hover:bg-blue-600 text-white font-medium px-6 py-3 rounded-lg transition-colors"}," R√©essayer ")])):(n(),u("div",Cl,[(n(!0),u(M,null,U(m.value,s=>(n(),u("div",{key:s.id,class:"group relative bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-300"},[e("div",El,[e("img",{src:_(s.image),alt:s.title||"Photo",class:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500",onError:o[7]||(o[7]=a=>{a.target.src="https://images.unsplash.com/photo-1540575467063-178a50c2df87?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"})},null,40,Al)]),e("div",jl,[e("h3",Rl,r(s.title||"Sans titre"),1),e("p",Tl,r(s.category||"Non cat√©goris√©"),1),s.date?(n(),u("p",Sl,r(D(s.date)),1)):x("",!0)]),e("div",Pl,[e("button",{onClick:a=>E(s.id),class:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",disabled:k.value},[...o[23]||(o[23]=[e("i",{class:"fas fa-trash text-sm"},null,-1)])],8,Nl)])]))),128)),!d.value&&m.value.length===0?(n(),u("div",Fl,[...o[24]||(o[24]=[e("i",{class:"fas fa-images text-4xl text-gray-300 mb-4"},null,-1),e("p",null,"Aucune photo dans la galerie",-1)])])):x("",!0)]))]))}}),zl={class:"space-y-6"},Ll={class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},Ml={class:"bg-white rounded-xl p-6 shadow-lg border border-gray-100"},Ul={class:"flex items-center justify-between"},Gl={class:"text-2xl font-bold text-gray-900"},ql={class:"bg-white rounded-xl p-6 shadow-lg border border-gray-100"},Ol={class:"flex items-center justify-between"},Bl={class:"text-2xl font-bold text-gray-900"},Jl={key:0,class:"text-center py-12"},Yl={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},Hl={class:"flex items-center gap-2"},Wl={key:2,class:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden"},Ql={class:"p-4 border-b border-gray-200 flex items-center justify-between"},Kl={class:"overflow-x-auto"},Xl={class:"w-full"},Zl={class:"divide-y divide-gray-200"},ea={class:"px-6 py-4"},ta={class:"font-medium text-gray-900"},sa={class:"px-6 py-4 text-gray-600"},la={class:"px-6 py-4 text-center"},aa={class:"px-6 py-4"},oa={class:"flex items-center justify-center gap-2"},ra=["onClick"],na={key:0},ia=5e3,ua=W({__name:"DashboardNewsletter",setup(S){const w=v(""),p=v([]),m=v(!1),h=v(null),c=z(()=>w.value?p.value.filter(f=>f.email.toLowerCase().includes(w.value.toLowerCase())):p.value),d=z(()=>{const f=new Date,g=new Date(f.getFullYear(),f.getMonth(),1);return p.value.filter(E=>{const _=E.subscribedAt||E.createdAt;return _&&new Date(_)>=g}).length}),k=v(null),b=async(f=!1)=>{if(!(!f&&!w.value&&k.value&&Date.now()-k.value<ia&&p.value.length>0)&&!m.value){m.value=!0,h.value=null;try{const g=await re.getAllSubscribers({limit:100,search:w.value||void 0});p.value=g.data,k.value=Date.now(),console.log("üìß Newsletter Subscribers charg√©s:",p.value.length)}catch(g){console.error("Erreur lors du chargement des abonn√©s:",g),h.value=g.message||"Erreur lors du chargement des abonn√©s",p.value=[]}finally{m.value=!1}}},i=async f=>{if(f&&confirm("√ätes-vous s√ªr de vouloir supprimer cet abonn√© ?"))try{await re.deleteSubscriber(f),await b(!0),window.dispatchEvent(new CustomEvent("dashboard:update-notifications"))}catch(g){console.error("Erreur lors de la suppression:",g),alert("Erreur lors de la suppression: "+(g.message||"Erreur inconnue"))}},y=()=>{const f=p.value.map(D=>D.email).join(`
`),g=new Blob([f],{type:"text/csv"}),E=window.URL.createObjectURL(g),_=document.createElement("a");_.href=E,_.download="newsletter-subscribers.csv",_.click()},P=f=>f?new Date(f).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}):"N/A",T=f=>({active:"Actif",unsubscribed:"D√©sabonn√©",pending:"En attente"})[f]||f,j=f=>({active:"bg-green-100 text-green-700",unsubscribed:"bg-red-100 text-red-700",pending:"bg-yellow-100 text-yellow-700"})[f]||"bg-gray-100 text-gray-700";return Q(()=>{b()}),(f,g)=>(n(),u("div",zl,[g[13]||(g[13]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Abonn√©s Newsletter"),e("p",{class:"text-gray-600 mt-1"},"G√©rez les abonnements √† la newsletter")],-1)),e("div",Ll,[e("div",Ml,[e("div",Ul,[e("div",null,[g[2]||(g[2]=e("p",{class:"text-sm text-gray-600 mb-1"},"Total abonn√©s",-1)),e("p",Gl,r(p.value.length),1)]),g[3]||(g[3]=e("div",{class:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center"},[e("i",{class:"fas fa-users text-blue-600 text-xl"})],-1))])]),e("div",ql,[e("div",Ol,[e("div",null,[g[4]||(g[4]=e("p",{class:"text-sm text-gray-600 mb-1"},"Ce mois",-1)),e("p",Bl,r(d.value),1)]),g[5]||(g[5]=e("div",{class:"w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center"},[e("i",{class:"fas fa-arrow-up text-green-600 text-xl"})],-1))])]),g[6]||(g[6]=G('<div class="bg-white rounded-xl p-6 shadow-lg border border-gray-100"><div class="flex items-center justify-between"><div><p class="text-sm text-gray-600 mb-1">Taux d&#39;ouverture</p><p class="text-2xl font-bold text-gray-900">42%</p></div><div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center"><i class="fas fa-chart-line text-purple-600 text-xl"></i></div></div></div>',1))]),m.value?(n(),u("div",Jl,[...g[7]||(g[7]=[e("i",{class:"fas fa-spinner fa-spin text-3xl text-blue-600 mb-4"},null,-1),e("p",{class:"text-gray-600"},"Chargement des abonn√©s...",-1)])])):h.value?(n(),u("div",Yl,[e("div",Hl,[g[8]||(g[8]=e("i",{class:"fas fa-exclamation-circle"},null,-1)),e("span",null,r(h.value),1)])])):(n(),u("div",Wl,[e("div",Ql,[R(e("input",{"onUpdate:modelValue":g[0]||(g[0]=E=>w.value=E),type:"text",placeholder:"Rechercher un email...",onInput:g[1]||(g[1]=()=>b(!0)),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,544),[[N,w.value]]),e("button",{onClick:y,class:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},[...g[9]||(g[9]=[e("i",{class:"fas fa-download"},null,-1),e("span",null,"Exporter",-1)])])]),e("div",Kl,[e("table",Xl,[g[12]||(g[12]=e("thead",{class:"bg-gradient-to-r from-blue-600 to-blue-700 text-white"},[e("tr",null,[e("th",{class:"px-6 py-4 text-left text-sm font-semibold"},"Email"),e("th",{class:"px-6 py-4 text-left text-sm font-semibold"},"Date d'inscription"),e("th",{class:"px-6 py-4 text-center text-sm font-semibold"},"Statut"),e("th",{class:"px-6 py-4 text-center text-sm font-semibold"},"Actions")])],-1)),e("tbody",Zl,[(n(!0),u(M,null,U(c.value,E=>(n(),u("tr",{key:E.id,class:"hover:bg-gray-50 transition-colors"},[e("td",ea,[e("div",ta,r(E.email),1)]),e("td",sa,r(P(E.subscribedAt||E.createdAt)),1),e("td",la,[e("span",{class:L(["px-3 py-1 rounded-full text-xs font-medium",j(E.status)])},r(T(E.status)),3)]),e("td",aa,[e("div",oa,[e("button",{onClick:_=>i(E.id),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"},[...g[10]||(g[10]=[e("i",{class:"fas fa-trash"},null,-1)])],8,ra)])])]))),128)),c.value.length===0?(n(),u("tr",na,[...g[11]||(g[11]=[e("td",{colspan:"4",class:"px-6 py-12 text-center text-gray-500"}," Aucun abonn√© trouv√© ",-1)])])):x("",!0)])])])]))]))}}),da={class:"space-y-6"},ca={class:"grid grid-cols-1 sm:grid-cols-4 gap-4"},pa={class:"bg-white rounded-xl p-6 shadow-lg border border-gray-100"},ga={class:"text-2xl font-bold text-gray-900"},va={class:"bg-white rounded-xl p-6 shadow-lg border border-gray-100"},ma={class:"text-2xl font-bold text-yellow-600"},ba={class:"bg-white rounded-xl p-6 shadow-lg border border-gray-100"},xa={class:"text-2xl font-bold text-green-600"},fa={class:"bg-white rounded-xl p-6 shadow-lg border border-gray-100"},ya={class:"text-2xl font-bold text-blue-600"},ha={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl"},wa={class:"flex items-center gap-2"},$a={key:1,class:"text-center py-12"},ka={key:2,class:"bg-white rounded-xl p-4 shadow-lg border border-gray-100 flex items-center gap-4"},_a={key:3,class:"space-y-4"},Da={class:"flex items-start justify-between mb-4"},Ca={class:"flex-1"},Ea={class:"flex items-center gap-3 mb-2"},Aa={class:"text-lg font-bold text-gray-900"},ja={class:"text-gray-600 mb-1"},Ra={class:"text-gray-600 mb-1"},Ta={key:0,class:"text-gray-600 mb-1"},Sa={class:"text-gray-600"},Pa={class:"flex gap-2"},Na=["onClick","disabled"],Fa=["onClick","disabled"],Va=["onClick"],Ia=["onClick","disabled"],za={class:"bg-gray-50 rounded-lg p-4"},La={class:"text-sm text-gray-700"},Ma={class:"text-sm text-gray-700 mt-2"},Ua={class:"text-sm text-gray-700 mt-2"},Ga={key:0,class:"text-center py-12 text-gray-500"},qa={class:"bg-white rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto"},Oa={class:"flex items-center justify-between mb-6"},Ba={class:"space-y-4"},Ja={class:"text-gray-900"},Ya={class:"text-gray-600 text-sm"},Ha={key:0,class:"text-gray-600 text-sm"},Wa={class:"text-gray-900"},Qa={class:"text-gray-600 text-sm"},Ka={class:"text-gray-900 font-semibold"},Xa={class:"text-gray-900 mt-2 whitespace-pre-wrap"},Za={class:"text-gray-900"},eo={class:"text-gray-900"},to=5e3,so=W({__name:"DashboardFinancing",setup(S){const w=le.useToast(),p=v(""),m=v(""),h=v([]),c=v(null),d=v(!1),k=v(null),b=v(!1),i=z(()=>{let o=h.value;if(m.value&&(o=o.filter(s=>s.status===m.value)),p.value){const s=p.value.toLowerCase();o=o.filter(a=>(a.contactFirstName+" "+a.contactLastName).toLowerCase().includes(s)||a.contactEmail.toLowerCase().includes(s)||a.companyName.toLowerCase().includes(s)||a.projectTitle.toLowerCase().includes(s))}return o}),y=z(()=>h.value.filter(o=>o.status==="submitted"||o.status==="under-review").length),P=z(()=>h.value.filter(o=>o.status==="approved"||o.status==="rejected").length),T=z(()=>h.value.filter(o=>{const s=new Date(o.createdAt||""),a=new Date;return a.setDate(a.getDate()-7),s>=a}).length),j=v(null),f=async(o=!1)=>{if(!(!o&&!m.value&&!p.value&&j.value&&Date.now()-j.value<to&&h.value.length>0)&&!d.value){d.value=!0,k.value=null;try{const s=await se.getRequests({status:m.value||void 0,search:p.value||void 0,limit:100});h.value=s.data,j.value=Date.now()}catch(s){console.error("Erreur lors du chargement des demandes:",s),k.value=s.message||"Erreur lors du chargement des demandes",h.value=[]}finally{d.value=!1}}},g=o=>{c.value=o},E=async o=>{if(o&&confirm("√ätes-vous s√ªr de vouloir supprimer cette demande ?")){b.value=!0,k.value=null;try{await se.deleteRequest(o),await f(!0),w.open({message:"‚úÖ Demande de financement supprim√©e avec succ√®s !",type:"success",position:"top-right",duration:5e3}),window.dispatchEvent(new CustomEvent("dashboard:update-notifications"))}catch(s){console.error("Erreur lors de la suppression:",s);const a=s.message||"Erreur lors de la suppression";k.value=a,w.open({message:`‚ùå ${a}`,type:"error",position:"top-right",duration:6e3})}finally{b.value=!1}}},_=async(o,s)=>{if(o.id){b.value=!0,k.value=null;try{await se.updateRequestStatus(o.id,s),await f(!0);const a={approved:"approuv√©e",rejected:"refus√©e","under-review":"mise en r√©vision","on-hold":"mise en attente"};w.open({message:`‚úÖ Demande ${a[s]||"mise √† jour"} avec succ√®s !`,type:"success",position:"top-right",duration:5e3}),window.dispatchEvent(new CustomEvent("dashboard:update-notifications"))}catch(a){console.error("Erreur lors de la mise √† jour:",a);const t=a.message||a.errors?.status?.[0]||"Erreur lors de la mise √† jour du statut";k.value=t,w.open({message:`‚ùå ${t}`,type:"error",position:"top-right",duration:6e3})}finally{b.value=!1}}},D=o=>({draft:"Brouillon",submitted:"Soumise","under-review":"En r√©vision",approved:"Approuv√©e",rejected:"Refus√©e","on-hold":"En attente"})[o]||o,C=o=>({draft:"bg-gray-100 text-gray-700",submitted:"bg-yellow-100 text-yellow-700","under-review":"bg-blue-100 text-blue-700",approved:"bg-green-100 text-green-700",rejected:"bg-red-100 text-red-700","on-hold":"bg-orange-100 text-orange-700"})[o]||"bg-gray-100 text-gray-700",A=o=>o?new Date(o).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return Q(()=>{f()}),(o,s)=>(n(),u("div",da,[s[31]||(s[31]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Demandes de Financement"),e("p",{class:"text-gray-600 mt-1"},"G√©rez les demandes de financement re√ßues")],-1)),e("div",ca,[e("div",pa,[s[6]||(s[6]=e("p",{class:"text-sm text-gray-600 mb-1"},"Total",-1)),e("p",ga,r(h.value.length),1)]),e("div",va,[s[7]||(s[7]=e("p",{class:"text-sm text-gray-600 mb-1"},"En attente",-1)),e("p",ma,r(y.value),1)]),e("div",ba,[s[8]||(s[8]=e("p",{class:"text-sm text-gray-600 mb-1"},"Trait√©es",-1)),e("p",xa,r(P.value),1)]),e("div",fa,[s[9]||(s[9]=e("p",{class:"text-sm text-gray-600 mb-1"},"Nouvelles",-1)),e("p",ya,r(T.value),1)])]),k.value?(n(),u("div",ha,[e("div",wa,[s[10]||(s[10]=e("i",{class:"fas fa-exclamation-circle"},null,-1)),e("span",null,r(k.value),1)])])):x("",!0),d.value?(n(),u("div",$a,[...s[11]||(s[11]=[e("i",{class:"fas fa-spinner fa-spin text-4xl text-blue-600 mb-4"},null,-1),e("p",{class:"text-gray-600"},"Chargement des demandes...",-1)])])):(n(),u("div",ka,[R(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>m.value=a),onChange:s[1]||(s[1]=()=>f(!0)),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},[...s[12]||(s[12]=[G('<option value="">Tous les statuts</option><option value="submitted">Soumise</option><option value="under-review">En r√©vision</option><option value="approved">Approuv√©e</option><option value="rejected">Refus√©e</option><option value="on-hold">En attente</option>',6)])],544),[[H,m.value]]),R(e("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>p.value=a),onInput:s[3]||(s[3]=()=>f(!0)),type:"text",placeholder:"Rechercher...",class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,544),[[N,p.value]])])),d.value?x("",!0):(n(),u("div",_a,[(n(!0),u(M,null,U(i.value,a=>(n(),u("div",{key:a.id,class:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300"},[e("div",Da,[e("div",Ca,[e("div",Ea,[e("h3",Aa,r(a.contactFirstName)+" "+r(a.contactLastName),1),e("span",{class:L(["px-3 py-1 rounded-full text-xs font-medium",C(a.status)])},r(D(a.status)),3)]),e("p",ja,[s[13]||(s[13]=e("i",{class:"fas fa-building mr-2"},null,-1)),I(r(a.companyName),1)]),e("p",Ra,[s[14]||(s[14]=e("i",{class:"fas fa-envelope mr-2"},null,-1)),I(r(a.contactEmail),1)]),a.contactPhone?(n(),u("p",Ta,[s[15]||(s[15]=e("i",{class:"fas fa-phone mr-2"},null,-1)),I(r(a.contactPhone),1)])):x("",!0),e("p",Sa,[s[16]||(s[16]=e("i",{class:"fas fa-calendar mr-2"},null,-1)),I(r(A(a.createdAt)),1)])]),e("div",Pa,[a.status!=="approved"?(n(),u("button",{key:0,onClick:t=>_(a,"approved"),disabled:b.value,class:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors disabled:opacity-50",title:"Approuver"},[...s[17]||(s[17]=[e("i",{class:"fas fa-check"},null,-1)])],8,Na)):x("",!0),a.status!=="rejected"?(n(),u("button",{key:1,onClick:t=>_(a,"rejected"),disabled:b.value,class:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"Rejeter"},[...s[18]||(s[18]=[e("i",{class:"fas fa-times"},null,-1)])],8,Fa)):x("",!0),e("button",{onClick:t=>g(a),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Voir les d√©tails"},[...s[19]||(s[19]=[e("i",{class:"fas fa-eye"},null,-1)])],8,Va),e("button",{onClick:t=>E(a.id),disabled:b.value,class:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"Supprimer"},[...s[20]||(s[20]=[e("i",{class:"fas fa-trash"},null,-1)])],8,Ia)])]),e("div",za,[e("p",La,[s[21]||(s[21]=e("strong",null,"Projet:",-1)),I(" "+r(a.projectTitle),1)]),e("p",Ma,[s[22]||(s[22]=e("strong",null,"Description:",-1)),I(" "+r(a.projectDescription?.substring(0,200))+r(a.projectDescription&&a.projectDescription.length>200?"...":""),1)]),e("p",Ua,[s[23]||(s[23]=e("strong",null,"Montant demand√©:",-1)),I(" "+r(a.requestedAmount)+" "+r(a.currency),1)])])]))),128)),i.value.length===0?(n(),u("div",Ga," Aucune demande trouv√©e ")):x("",!0)])),c.value?(n(),u("div",{key:4,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:s[5]||(s[5]=Z(a=>c.value=null,["self"]))},[e("div",qa,[e("div",Oa,[s[25]||(s[25]=e("h3",{class:"text-2xl font-bold text-gray-900"},"D√©tails de la demande",-1)),e("button",{onClick:s[4]||(s[4]=a=>c.value=null),class:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors"},[...s[24]||(s[24]=[e("i",{class:"fas fa-times"},null,-1)])])]),e("div",Ba,[e("div",null,[s[26]||(s[26]=e("label",{class:"text-sm font-medium text-gray-600"},"Contact",-1)),e("p",Ja,r(c.value.contactFirstName)+" "+r(c.value.contactLastName),1),e("p",Ya,r(c.value.contactEmail),1),c.value.contactPhone?(n(),u("p",Ha,r(c.value.contactPhone),1)):x("",!0)]),e("div",null,[s[27]||(s[27]=e("label",{class:"text-sm font-medium text-gray-600"},"Entreprise",-1)),e("p",Wa,r(c.value.companyName),1),e("p",Qa,r(c.value.address)+", "+r(c.value.city)+", "+r(c.value.country),1)]),e("div",null,[s[28]||(s[28]=e("label",{class:"text-sm font-medium text-gray-600"},"Projet",-1)),e("p",Ka,r(c.value.projectTitle),1),e("p",Xa,r(c.value.projectDescription),1)]),e("div",null,[s[29]||(s[29]=e("label",{class:"text-sm font-medium text-gray-600"},"Montant demand√©",-1)),e("p",Za,r(c.value.requestedAmount)+" "+r(c.value.currency),1)]),e("div",null,[s[30]||(s[30]=e("label",{class:"text-sm font-medium text-gray-600"},"Date",-1)),e("p",eo,r(A(c.value.createdAt)),1)])])])])):x("",!0)]))}}),lo={class:"space-y-6"},ao={class:"grid grid-cols-1 sm:grid-cols-4 gap-4"},oo={class:"bg-white rounded-xl p-6 shadow-lg border border-gray-100"},ro={class:"text-2xl font-bold text-gray-900"},no={class:"bg-white rounded-xl p-6 shadow-lg border border-gray-100"},io={class:"text-2xl font-bold text-yellow-600"},uo={class:"bg-white rounded-xl p-6 shadow-lg border border-gray-100"},co={class:"text-2xl font-bold text-green-600"},po={class:"bg-white rounded-xl p-6 shadow-lg border border-gray-100"},go={class:"text-2xl font-bold text-blue-600"},vo={class:"bg-white rounded-xl p-4 shadow-lg border border-gray-100 flex items-center gap-4"},mo={key:0,class:"text-center py-12"},bo={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg"},xo={class:"flex items-center gap-2"},fo={key:2,class:"space-y-4"},yo={class:"flex items-start justify-between mb-4"},ho={class:"flex-1"},wo={class:"flex items-center gap-3 mb-2"},$o={class:"text-lg font-bold text-gray-900"},ko={class:"text-gray-600 mb-1"},_o={key:0,class:"text-gray-600 mb-1"},Do={class:"text-gray-600 mb-1"},Co={class:"text-gray-600"},Eo={class:"flex gap-2"},Ao=["onClick"],jo=["onClick"],Ro=["onClick"],To={key:0,class:"bg-gray-50 rounded-lg p-4"},So={class:"text-sm text-gray-700"},Po={key:0,class:"text-center py-12 text-gray-500"},No={class:"bg-white rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto"},Fo={class:"flex items-center justify-between mb-6"},Vo={class:"space-y-4"},Io={class:"text-gray-900"},zo={class:"text-gray-900"},Lo={key:0},Mo={class:"text-gray-900"},Uo={class:"text-gray-900"},Go={key:1},qo={class:"text-gray-900 whitespace-pre-wrap"},Oo={class:"text-gray-900"},Bo={class:"text-gray-900"},Jo=5e3,Yo=W({__name:"DashboardTraining",setup(S){const w=v(""),p=v(""),m=v(""),h=v([]),c=v(null),d=v(!1),k=v(null),b=z(()=>{let o=h.value;if(p.value&&(o=o.filter(s=>s.status===p.value)),m.value&&(o=o.filter(s=>s.program===m.value)),w.value){const s=w.value.toLowerCase();o=o.filter(a=>a.name.toLowerCase().includes(s)||a.email.toLowerCase().includes(s))}return o}),i=z(()=>h.value.filter(o=>o.status==="pending").length),y=z(()=>h.value.filter(o=>o.status==="confirmed").length),P=z(()=>h.value.filter(o=>{const s=new Date(o.registrationDate||""),a=new Date;return a.setDate(a.getDate()-7),s>=a}).length),T=v(null),j=async(o=!1)=>{if(!(!o&&!p.value&&!m.value&&!w.value&&T.value&&Date.now()-T.value<Jo&&h.value.length>0)&&!d.value){d.value=!0,k.value=null;try{const s=await ae.getRegistrations({status:p.value||void 0,program:m.value||void 0,search:w.value||void 0,limit:100});h.value=s.data,T.value=Date.now(),console.log("üìö Training Registrations charg√©es:",h.value.length)}catch(s){console.error("Erreur lors du chargement des inscriptions:",s),k.value=s.message||"Erreur lors du chargement des inscriptions",h.value=[]}finally{d.value=!1}}},f=o=>{c.value=o},g=async o=>{if(!o.id)return;const s=o.status==="pending"?"confirmed":o.status;try{await ae.updateRegistration(o.id,{status:s}),await j(!0),window.dispatchEvent(new CustomEvent("dashboard:update-notifications"))}catch(a){console.error("Erreur lors de la mise √† jour du statut:",a),alert("Erreur lors de la mise √† jour du statut: "+(a.message||"Erreur inconnue"))}},E=async o=>{if(o&&confirm("√ätes-vous s√ªr de vouloir supprimer cette inscription ?"))try{await ae.deleteRegistration(o),await j(!0),window.dispatchEvent(new CustomEvent("dashboard:update-notifications"))}catch(s){console.error("Erreur lors de la suppression:",s),alert("Erreur lors de la suppression: "+(s.message||"Erreur inconnue"))}},_=o=>({pending:"En attente",confirmed:"Confirm√©e",cancelled:"Annul√©e",completed:"Termin√©e"})[o]||o,D=o=>({pending:"bg-yellow-100 text-yellow-700",confirmed:"bg-green-100 text-green-700",cancelled:"bg-red-100 text-red-700",completed:"bg-blue-100 text-blue-700"})[o]||"bg-gray-100 text-gray-700",C=o=>({training1:"Formation en Gestion d'Entreprise",training2:"Accompagnement Personnalis√©",training3:"Formation en Entrepreneuriat",training4:"R√©seautage et Partenariats"})[o]||o,A=o=>o?new Date(o).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return ce([p,m],()=>{j(!0)}),Q(()=>{j()}),(o,s)=>(n(),u("div",lo,[s[30]||(s[30]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Inscriptions aux Formations"),e("p",{class:"text-gray-600 mt-1"},"G√©rez les inscriptions aux formations d'entrepreneurs")],-1)),e("div",ao,[e("div",oo,[s[5]||(s[5]=e("p",{class:"text-sm text-gray-600 mb-1"},"Total",-1)),e("p",ro,r(h.value.length),1)]),e("div",no,[s[6]||(s[6]=e("p",{class:"text-sm text-gray-600 mb-1"},"En attente",-1)),e("p",io,r(i.value),1)]),e("div",uo,[s[7]||(s[7]=e("p",{class:"text-sm text-gray-600 mb-1"},"Confirm√©es",-1)),e("p",co,r(y.value),1)]),e("div",po,[s[8]||(s[8]=e("p",{class:"text-sm text-gray-600 mb-1"},"Nouvelles",-1)),e("p",go,r(P.value),1)])]),e("div",vo,[R(e("select",{"onUpdate:modelValue":s[0]||(s[0]=a=>p.value=a),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},[...s[9]||(s[9]=[G('<option value="">Tous les statuts</option><option value="pending">En attente</option><option value="confirmed">Confirm√©e</option><option value="cancelled">Annul√©e</option><option value="completed">Termin√©e</option>',5)])],512),[[H,p.value]]),R(e("select",{"onUpdate:modelValue":s[1]||(s[1]=a=>m.value=a),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},[...s[10]||(s[10]=[G('<option value="">Tous les programmes</option><option value="training1">Formation en Gestion d&#39;Entreprise</option><option value="training2">Accompagnement Personnalis√©</option><option value="training3">Formation en Entrepreneuriat</option><option value="training4">R√©seautage et Partenariats</option>',5)])],512),[[H,m.value]]),R(e("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>w.value=a),type:"text",placeholder:"Rechercher...",class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,512),[[N,w.value]])]),d.value?(n(),u("div",mo,[...s[11]||(s[11]=[e("i",{class:"fas fa-spinner fa-spin text-3xl text-blue-600 mb-4"},null,-1),e("p",{class:"text-gray-600"},"Chargement des inscriptions...",-1)])])):k.value?(n(),u("div",bo,[e("div",xo,[s[12]||(s[12]=e("i",{class:"fas fa-exclamation-circle"},null,-1)),e("span",null,r(k.value),1)])])):(n(),u("div",fo,[(n(!0),u(M,null,U(b.value,a=>(n(),u("div",{key:a.id,class:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300"},[e("div",yo,[e("div",ho,[e("div",wo,[e("h3",$o,r(a.name),1),e("span",{class:L(["px-3 py-1 rounded-full text-xs font-medium",D(a.status)])},r(_(a.status)),3)]),e("p",ko,[s[13]||(s[13]=e("i",{class:"fas fa-envelope mr-2"},null,-1)),I(r(a.email),1)]),a.phone?(n(),u("p",_o,[s[14]||(s[14]=e("i",{class:"fas fa-phone mr-2"},null,-1)),I(r(a.phone),1)])):x("",!0),e("p",Do,[s[15]||(s[15]=e("i",{class:"fas fa-graduation-cap mr-2"},null,-1)),I(r(C(a.program)),1)]),e("p",Co,[s[16]||(s[16]=e("i",{class:"fas fa-calendar mr-2"},null,-1)),I(r(A(a.registrationDate)),1)])]),e("div",Eo,[e("button",{onClick:t=>f(a),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors"},[...s[17]||(s[17]=[e("i",{class:"fas fa-eye"},null,-1)])],8,Ao),e("button",{onClick:t=>g(a),class:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors"},[...s[18]||(s[18]=[e("i",{class:"fas fa-check"},null,-1)])],8,jo),e("button",{onClick:t=>E(a.id),class:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors"},[...s[19]||(s[19]=[e("i",{class:"fas fa-trash"},null,-1)])],8,Ro)])]),a.message?(n(),u("div",To,[e("p",So,[s[20]||(s[20]=e("strong",null,"Message:",-1)),I(" "+r(a.message),1)])])):x("",!0)]))),128)),b.value.length===0?(n(),u("div",Po," Aucune inscription trouv√©e ")):x("",!0)])),c.value?(n(),u("div",{key:3,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:s[4]||(s[4]=Z(a=>c.value=null,["self"]))},[e("div",No,[e("div",Fo,[s[22]||(s[22]=e("h3",{class:"text-2xl font-bold text-gray-900"},"D√©tails de l'inscription",-1)),e("button",{onClick:s[3]||(s[3]=a=>c.value=null),class:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors"},[...s[21]||(s[21]=[e("i",{class:"fas fa-times"},null,-1)])])]),e("div",Vo,[e("div",null,[s[23]||(s[23]=e("label",{class:"text-sm font-medium text-gray-600"},"Nom complet",-1)),e("p",Io,r(c.value.name),1)]),e("div",null,[s[24]||(s[24]=e("label",{class:"text-sm font-medium text-gray-600"},"Email",-1)),e("p",zo,r(c.value.email),1)]),c.value.phone?(n(),u("div",Lo,[s[25]||(s[25]=e("label",{class:"text-sm font-medium text-gray-600"},"T√©l√©phone",-1)),e("p",Mo,r(c.value.phone),1)])):x("",!0),e("div",null,[s[26]||(s[26]=e("label",{class:"text-sm font-medium text-gray-600"},"Programme",-1)),e("p",Uo,r(C(c.value.program)),1)]),c.value.message?(n(),u("div",Go,[s[27]||(s[27]=e("label",{class:"text-sm font-medium text-gray-600"},"Message",-1)),e("p",qo,r(c.value.message),1)])):x("",!0),e("div",null,[s[28]||(s[28]=e("label",{class:"text-sm font-medium text-gray-600"},"Date d'inscription",-1)),e("p",Oo,r(A(c.value.registrationDate)),1)]),e("div",null,[s[29]||(s[29]=e("label",{class:"text-sm font-medium text-gray-600"},"Statut",-1)),e("p",Bo,r(_(c.value.status)),1)])])])])):x("",!0)]))}}),Ho={class:"space-y-6"},Wo={class:"grid grid-cols-1 sm:grid-cols-4 gap-4"},Qo={class:"bg-white rounded-xl p-6 shadow-lg border border-gray-100"},Ko={class:"text-2xl font-bold text-gray-900"},Xo={class:"bg-white rounded-xl p-6 shadow-lg border border-gray-100"},Zo={class:"text-2xl font-bold text-yellow-600"},er={class:"bg-white rounded-xl p-6 shadow-lg border border-gray-100"},tr={class:"text-2xl font-bold text-green-600"},sr={class:"bg-white rounded-xl p-6 shadow-lg border border-gray-100"},lr={class:"text-2xl font-bold text-blue-600"},ar={key:0,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl"},or={class:"flex items-center gap-2"},rr={key:1,class:"text-center py-12"},nr={key:2,class:"bg-white rounded-xl p-4 shadow-lg border border-gray-100 flex items-center gap-4"},ir={key:3,class:"space-y-4"},ur={class:"flex items-start justify-between mb-4"},dr={class:"flex-1"},cr={class:"flex items-center gap-3 mb-2"},pr={class:"text-lg font-bold text-gray-900"},gr={class:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium"},vr={class:"text-gray-600 mb-1"},mr={class:"text-gray-600 mb-1"},br={key:0,class:"text-gray-600 mb-1"},xr={class:"text-gray-600"},fr={class:"flex gap-2"},yr=["onClick","disabled"],hr=["onClick","disabled"],wr=["onClick","disabled"],$r=["onClick"],kr=["onClick","disabled"],_r={class:"bg-gray-50 rounded-lg p-4"},Dr={class:"text-sm text-gray-700 mb-2"},Cr={class:"text-sm text-gray-700 mb-2"},Er={class:"text-sm text-gray-700 mb-2"},Ar={class:"flex gap-2 mt-3 pt-3 border-t border-gray-200"},jr=["href"],Rr={key:1,class:"text-xs text-gray-500"},Tr={key:0,class:"text-center py-12 text-gray-500"},Sr={class:"bg-white rounded-2xl p-6 max-w-3xl w-full max-h-[90vh] overflow-y-auto"},Pr={class:"flex items-center justify-between mb-6"},Nr={class:"space-y-4"},Fr={class:"text-gray-900 font-semibold"},Vr={class:"text-gray-900"},Ir={class:"text-gray-900"},zr={class:"text-gray-900"},Lr={class:"text-gray-900 whitespace-pre-wrap"},Mr={key:0},Ur={class:"text-gray-900"},Gr={class:"text-gray-900"},qr={class:"text-gray-600 text-sm"},Or={key:0,class:"text-gray-600 text-sm"},Br={key:1,class:"text-gray-600 text-sm"},Jr={key:1},Yr={class:"text-gray-900 whitespace-pre-wrap"},Hr={class:"text-gray-900"},Wr={class:"text-gray-900"},Qr={class:"border-t border-gray-200 pt-4 mt-4"},Kr={class:"space-y-3"},Xr=["href"],Zr={key:1,class:"text-sm text-gray-500"},en={key:0},tn=["src","alt"],sn=["href"],ln={key:1,class:"text-sm text-gray-500"},an=5e3,on=W({__name:"DashboardPublications",setup(S){const w=le.useToast(),p=v(""),m=v(""),h=v(""),c=v([]),d=v(null),k=v(!1),b=v(null),i=v(!1),y=z(()=>{let a=c.value;if(m.value&&(a=a.filter(t=>t.status===m.value)),h.value&&(a=a.filter(t=>t.type===h.value)),p.value){const t=p.value.toLowerCase();a=a.filter(l=>l.name.toLowerCase().includes(t)||l.email.toLowerCase().includes(t)||l.title.toLowerCase().includes(t))}return a}),P=z(()=>c.value.filter(a=>a.status==="pending").length),T=z(()=>c.value.filter(a=>a.status==="accepted").length),j=z(()=>c.value.filter(a=>a.status==="published").length),f=v(null),g=async(a=!1)=>{if(!(!a&&!m.value&&!h.value&&!p.value&&f.value&&Date.now()-f.value<an&&c.value.length>0)&&!k.value){k.value=!0,b.value=null;try{const t=await oe.getRequests({status:m.value||void 0,type:h.value||void 0,search:p.value||void 0,limit:100});c.value=t.data,f.value=Date.now()}catch(t){console.error("Erreur lors du chargement des demandes:",t),b.value=t.message||"Erreur lors du chargement des demandes",c.value=[]}finally{k.value=!1}}},E=a=>{d.value=a},_=async(a,t)=>{if(a.id){i.value=!0,b.value=null;try{await oe.updateRequestStatus(a.id,t),await g(!0);const l={accepted:"accept√©e",rejected:"refus√©e",published:"publi√©e"};w.open({message:`‚úÖ Demande ${l[t]||"mise √† jour"} avec succ√®s !`,type:"success",position:"top-right",duration:5e3}),window.dispatchEvent(new CustomEvent("dashboard:update-notifications"))}catch(l){console.error("Erreur lors de la mise √† jour:",l);const $=l.message||l.errors?.status?.[0]||"Erreur lors de la mise √† jour du statut";b.value=$,w.open({message:`‚ùå ${$}`,type:"error",position:"top-right",duration:6e3})}finally{i.value=!1}}},D=async a=>{if(a&&confirm("√ätes-vous s√ªr de vouloir supprimer cette demande ?")){i.value=!0,b.value=null;try{await oe.deleteRequest(a),await g(!0),w.open({message:"‚úÖ Demande de publication supprim√©e avec succ√®s !",type:"success",position:"top-right",duration:5e3}),window.dispatchEvent(new CustomEvent("dashboard:update-notifications"))}catch(t){console.error("Erreur lors de la suppression:",t);const l=t.message||"Erreur lors de la suppression";b.value=l,w.open({message:`‚ùå ${l}`,type:"error",position:"top-right",duration:6e3})}finally{i.value=!1}}},C=a=>({pending:"En attente","under-review":"En r√©vision",accepted:"Accept√©e",rejected:"Refus√©e",published:"Publi√©e"})[a]||a,A=a=>({pending:"bg-yellow-100 text-yellow-700","under-review":"bg-blue-100 text-blue-700",accepted:"bg-green-100 text-green-700",rejected:"bg-red-100 text-red-700",published:"bg-purple-100 text-purple-700"})[a]||"bg-gray-100 text-gray-700",o=a=>({article:"Article","research-paper":"Document de recherche",book:"Livre",report:"Rapport",other:"Autre"})[a]||a,s=a=>a?new Date(a).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return Q(()=>{g()}),(a,t)=>(n(),u("div",Ho,[t[47]||(t[47]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Demandes de Publication"),e("p",{class:"text-gray-600 mt-1"},"G√©rez les demandes de publication d'articles")],-1)),e("div",Wo,[e("div",Qo,[t[9]||(t[9]=e("p",{class:"text-sm text-gray-600 mb-1"},"Total",-1)),e("p",Ko,r(c.value.length),1)]),e("div",Xo,[t[10]||(t[10]=e("p",{class:"text-sm text-gray-600 mb-1"},"En attente",-1)),e("p",Zo,r(P.value),1)]),e("div",er,[t[11]||(t[11]=e("p",{class:"text-sm text-gray-600 mb-1"},"Accept√©es",-1)),e("p",tr,r(T.value),1)]),e("div",sr,[t[12]||(t[12]=e("p",{class:"text-sm text-gray-600 mb-1"},"Publi√©es",-1)),e("p",lr,r(j.value),1)])]),b.value?(n(),u("div",ar,[e("div",or,[t[13]||(t[13]=e("i",{class:"fas fa-exclamation-circle"},null,-1)),e("span",null,r(b.value),1)])])):x("",!0),k.value?(n(),u("div",rr,[...t[14]||(t[14]=[e("i",{class:"fas fa-spinner fa-spin text-4xl text-blue-600 mb-4"},null,-1),e("p",{class:"text-gray-600"},"Chargement des demandes...",-1)])])):(n(),u("div",nr,[R(e("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>m.value=l),onChange:t[1]||(t[1]=()=>g(!0)),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},[...t[15]||(t[15]=[G('<option value="">Tous les statuts</option><option value="pending">En attente</option><option value="under-review">En r√©vision</option><option value="accepted">Accept√©e</option><option value="rejected">Refus√©e</option><option value="published">Publi√©e</option>',6)])],544),[[H,m.value]]),R(e("select",{"onUpdate:modelValue":t[2]||(t[2]=l=>h.value=l),onChange:t[3]||(t[3]=()=>g(!0)),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},[...t[16]||(t[16]=[G('<option value="">Tous les types</option><option value="article">Article</option><option value="research-paper">Document de recherche</option><option value="book">Livre</option><option value="report">Rapport</option><option value="other">Autre</option>',6)])],544),[[H,h.value]]),R(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>p.value=l),onInput:t[5]||(t[5]=()=>g(!0)),type:"text",placeholder:"Rechercher...",class:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"},null,544),[[N,p.value]])])),k.value?x("",!0):(n(),u("div",ir,[(n(!0),u(M,null,U(y.value,l=>(n(),u("div",{key:l.id,class:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300"},[e("div",ur,[e("div",dr,[e("div",cr,[e("h3",pr,r(l.title),1),e("span",{class:L(["px-3 py-1 rounded-full text-xs font-medium",A(l.status)])},r(C(l.status)),3),e("span",gr,r(o(l.type)),1)]),e("p",vr,[t[17]||(t[17]=e("i",{class:"fas fa-user mr-2"},null,-1)),I(r(l.name),1)]),e("p",mr,[t[18]||(t[18]=e("i",{class:"fas fa-envelope mr-2"},null,-1)),I(r(l.email),1)]),l.institution?(n(),u("p",br,[t[19]||(t[19]=e("i",{class:"fas fa-university mr-2"},null,-1)),I(r(l.institution),1)])):x("",!0),e("p",xr,[t[20]||(t[20]=e("i",{class:"fas fa-calendar mr-2"},null,-1)),I(r(s(l.submissionDate)),1)])]),e("div",fr,[l.status!=="accepted"?(n(),u("button",{key:0,onClick:$=>_(l,"accepted"),disabled:i.value,class:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors disabled:opacity-50",title:"Accepter"},[...t[21]||(t[21]=[e("i",{class:"fas fa-check"},null,-1)])],8,yr)):x("",!0),l.status!=="rejected"?(n(),u("button",{key:1,onClick:$=>_(l,"rejected"),disabled:i.value,class:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"Rejeter"},[...t[22]||(t[22]=[e("i",{class:"fas fa-times"},null,-1)])],8,hr)):x("",!0),l.status==="accepted"?(n(),u("button",{key:2,onClick:$=>_(l,"published"),disabled:i.value,class:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors disabled:opacity-50",title:"Publier"},[...t[23]||(t[23]=[e("i",{class:"fas fa-check-double"},null,-1)])],8,wr)):x("",!0),e("button",{onClick:$=>E(l),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Voir les d√©tails"},[...t[24]||(t[24]=[e("i",{class:"fas fa-eye"},null,-1)])],8,$r),e("button",{onClick:$=>D(l.id),disabled:i.value,class:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"Supprimer"},[...t[25]||(t[25]=[e("i",{class:"fas fa-trash"},null,-1)])],8,kr)])]),e("div",_r,[e("p",Dr,[t[26]||(t[26]=e("strong",null,"Auteurs:",-1)),I(" "+r(l.authors),1)]),e("p",Cr,[t[27]||(t[27]=e("strong",null,"Domaines:",-1)),I(" "+r(l.domains.join(", ")),1)]),e("p",Er,[t[28]||(t[28]=e("strong",null,"R√©sum√©:",-1)),I(" "+r(l.abstract?.substring(0,200))+r(l.abstract&&l.abstract.length>200?"...":""),1)]),e("div",Ar,[l.documentFileUrl||l.document_file_url?(n(),u("a",{key:0,href:l.documentFileUrl||l.document_file_url,target:"_blank",class:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 text-white rounded-lg text-xs font-medium hover:bg-blue-700 transition-colors"},[...t[29]||(t[29]=[e("i",{class:"fas fa-file-pdf"},null,-1),e("span",null,"T√©l√©charger le document",-1)])],8,jr)):(n(),u("span",Rr,"Aucun document"))])])]))),128)),y.value.length===0?(n(),u("div",Tr," Aucune demande trouv√©e ")):x("",!0)])),d.value?(n(),u("div",{key:4,class:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:t[8]||(t[8]=Z(l=>d.value=null,["self"]))},[e("div",Sr,[e("div",Pr,[t[31]||(t[31]=e("h3",{class:"text-2xl font-bold text-gray-900"},"D√©tails de la demande",-1)),e("button",{onClick:t[6]||(t[6]=l=>d.value=null),class:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors"},[...t[30]||(t[30]=[e("i",{class:"fas fa-times"},null,-1)])])]),e("div",Nr,[e("div",null,[t[32]||(t[32]=e("label",{class:"text-sm font-medium text-gray-600"},"Titre du travail",-1)),e("p",Fr,r(d.value.title),1)]),e("div",null,[t[33]||(t[33]=e("label",{class:"text-sm font-medium text-gray-600"},"Auteurs",-1)),e("p",Vr,r(d.value.authors),1)]),e("div",null,[t[34]||(t[34]=e("label",{class:"text-sm font-medium text-gray-600"},"Type",-1)),e("p",Ir,r(o(d.value.type)),1)]),e("div",null,[t[35]||(t[35]=e("label",{class:"text-sm font-medium text-gray-600"},"Domaines de recherche",-1)),e("p",zr,r(d.value.domains.join(", ")),1)]),e("div",null,[t[36]||(t[36]=e("label",{class:"text-sm font-medium text-gray-600"},"R√©sum√©",-1)),e("p",Lr,r(d.value.abstract),1)]),d.value.keywords?(n(),u("div",Mr,[t[37]||(t[37]=e("label",{class:"text-sm font-medium text-gray-600"},"Mots-cl√©s",-1)),e("p",Ur,r(d.value.keywords),1)])):x("",!0),e("div",null,[t[38]||(t[38]=e("label",{class:"text-sm font-medium text-gray-600"},"Auteur principal",-1)),e("p",Gr,r(d.value.name),1),e("p",qr,r(d.value.email),1),d.value.institution?(n(),u("p",Or,r(d.value.institution),1)):x("",!0),d.value.position?(n(),u("p",Br,r(d.value.position),1)):x("",!0)]),d.value.message?(n(),u("div",Jr,[t[39]||(t[39]=e("label",{class:"text-sm font-medium text-gray-600"},"Message compl√©mentaire",-1)),e("p",Yr,r(d.value.message),1)])):x("",!0),e("div",null,[t[40]||(t[40]=e("label",{class:"text-sm font-medium text-gray-600"},"Date de soumission",-1)),e("p",Hr,r(s(d.value.submissionDate)),1)]),e("div",null,[t[41]||(t[41]=e("label",{class:"text-sm font-medium text-gray-600"},"Statut",-1)),e("p",Wr,r(C(d.value.status)),1)]),e("div",Qr,[t[46]||(t[46]=e("h4",{class:"text-sm font-semibold text-gray-900 mb-3"},"Fichiers",-1)),e("div",Kr,[e("div",null,[t[43]||(t[43]=e("label",{class:"text-sm font-medium text-gray-600 mb-2 block"},"Document (PDF/Word)",-1)),d.value.documentFileUrl||d.value.document_file_url?(n(),u("a",{key:0,href:d.value.documentFileUrl||d.value.document_file_url,target:"_blank",class:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors"},[...t[42]||(t[42]=[e("i",{class:"fas fa-file-pdf"},null,-1),e("span",null,"T√©l√©charger le document",-1),e("i",{class:"fas fa-external-link-alt text-xs"},null,-1)])],8,Xr)):(n(),u("p",Zr,"Aucun document disponible"))]),e("div",null,[t[45]||(t[45]=e("label",{class:"text-sm font-medium text-gray-600 mb-2 block"},"Image du document",-1)),d.value.documentImageUrl||d.value.document_image_url?(n(),u("div",en,[e("img",{src:d.value.documentImageUrl||d.value.document_image_url,alt:d.value.title,class:"max-w-md rounded-lg border border-gray-200 mb-2",onError:t[7]||(t[7]=l=>l.target.style.display="none")},null,40,tn),e("a",{href:d.value.documentImageUrl||d.value.document_image_url,target:"_blank",class:"inline-flex items-center gap-2 px-3 py-1.5 bg-gray-600 text-white rounded-lg text-xs font-medium hover:bg-gray-700 transition-colors"},[...t[44]||(t[44]=[e("i",{class:"fas fa-download"},null,-1),e("span",null,"T√©l√©charger l'image",-1)])],8,sn)])):(n(),u("p",ln,"Aucune image disponible"))])])])])])])):x("",!0)]))}}),rn={class:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50/20"},nn={class:"flex"},un={class:"h-full flex flex-col overflow-y-auto custom-scrollbar"},dn={class:"flex-1 p-4 space-y-1"},cn=["onClick"],pn={key:0,class:"absolute left-0 top-0 bottom-0 w-1 bg-white rounded-r-full"},gn={class:"font-semibold text-sm tracking-wide flex-1 text-left"},vn={class:"flex-1 ml-0 lg:ml-72 transition-all duration-500"},mn={class:"sticky top-0 bg-white/80 backdrop-blur-xl border-b border-slate-200/80 shadow-sm z-30"},bn={class:"px-4 sm:px-6 lg:px-8 py-5"},xn={class:"flex items-center justify-between"},fn={class:"flex items-center gap-4"},yn={class:"text-2xl font-bold text-slate-900 tracking-tight"},hn={key:0,class:"p-4 sm:p-6 lg:p-8"},wn={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 mb-8"},$n={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 mb-8"},kn={class:"relative"},_n={class:"flex items-center justify-between mb-4"},Dn={class:"text-3xl font-bold text-slate-900 mb-1.5 tracking-tight"},Cn={class:"text-sm font-medium text-slate-600"},En={class:"bg-white rounded-2xl p-6 shadow-lg shadow-slate-900/5 border border-slate-200/60 mb-8"},An={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},jn=["onClick"],Rn={class:"w-12 h-12 rounded-xl bg-blue-100 group-hover:bg-blue-600 flex items-center justify-center transition-all duration-300 group-hover:scale-110 group-hover:rotate-3"},Tn={class:"font-semibold text-slate-900 group-hover:text-blue-600 transition-colors"},Sn={class:"p-4 sm:p-6 lg:p-8"},Pn=W({__name:"DashboardView",setup(S){me();const w=xe(),p=v(!1),m=v("overview"),h=z(()=>w.menuItems),c=z(()=>w.statsWithChange),d=v([{id:"1",label:"Nouvel √©v√©nement",icon:"fas fa-plus-circle",section:"events"},{id:"2",label:"Nouvelle actualit√©",icon:"fas fa-plus-circle",section:"actualites"},{id:"3",label:"Ajouter photo",icon:"fas fa-plus-circle",section:"gallery"},{id:"4",label:"Voir messages",icon:"fas fa-envelope",section:"newsletter"}]),k=()=>{const _=h.value.find(D=>D.id===m.value);return _?_.label:"Dashboard"},b=async()=>{if(confirm("√ätes-vous s√ªr de vouloir vous d√©connecter ?"))try{await ve.logout()}catch(_){console.error("Erreur lors de la d√©connexion:",_)}finally{localStorage.removeItem("auth_token"),localStorage.removeItem("user"),window.location.href="/"}},i=()=>{window.innerWidth>=1024?p.value=!0:p.value=!1},y=_=>{const D=_.target;window.innerWidth<1024&&p.value&&!D.closest("aside")&&!D.closest("button")&&(p.value=!1)},{loadOverviewStats:P,loadNotificationCounts:T,refreshAll:j}=w;let f=null;const g=()=>{j()},E=()=>{P(!0)};return Q(async()=>{i(),window.addEventListener("resize",i),document.addEventListener("click",y),(async()=>{await P(),T().catch(D=>{console.warn("Erreur lors du chargement des notifications:",D)})})(),window.addEventListener("dashboard:update-notifications",g),window.addEventListener("dashboard:update-stats",E),f=window.setInterval(()=>{w.isCacheValid||j()},3e4)}),pe(()=>{window.removeEventListener("resize",i),document.removeEventListener("click",y),window.removeEventListener("dashboard:update-notifications",g),window.removeEventListener("dashboard:update-stats",E),f&&clearInterval(f)}),(_,D)=>(n(),u("div",rn,[e("div",nn,[e("aside",{class:L(["fixed left-0 top-0 h-screen w-72 bg-gradient-to-b from-white to-slate-50/50 backdrop-blur-2xl border-r border-slate-200/80 shadow-2xl shadow-slate-900/5 z-40 transition-all duration-500 ease-out",{"-translate-x-full lg:translate-x-0":!p.value,"translate-x-0":p.value}])},[e("div",un,[D[4]||(D[4]=G('<div class="p-6 pb-4 border-b border-slate-200/60 bg-gradient-to-r from-blue-600/5 to-indigo-600/5" data-v-b237463e><div class="flex items-center gap-3 mb-2" data-v-b237463e><div class="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-600 to-indigo-600 flex items-center justify-center shadow-lg shadow-blue-500/30" data-v-b237463e><i class="fas fa-chart-line text-white text-lg" data-v-b237463e></i></div><div data-v-b237463e><h2 class="text-xl font-bold text-slate-900 tracking-tight" data-v-b237463e>Dashboard</h2><p class="text-xs text-slate-500 font-medium" data-v-b237463e>CReFF-PME</p></div></div></div>',1)),e("nav",dn,[(n(!0),u(M,null,U(h.value,C=>(n(),u("button",{key:C.id,onClick:A=>{m.value=C.id,p.value=!1},class:"w-full group relative"},[e("div",{class:L(["flex items-center gap-3 px-4 py-3.5 rounded-xl transition-all duration-300 relative overflow-hidden",m.value===C.id?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/40 scale-[1.02]":"text-slate-700 hover:bg-slate-100/80 hover:text-blue-600 hover:translate-x-1"])},[m.value===C.id?(n(),u("div",pn)):x("",!0),e("div",{class:L(["w-5 h-5 flex items-center justify-center transition-transform duration-300",m.value===C.id?"scale-110":"group-hover:scale-110"])},[e("i",{class:L([C.icon,"text-base"])},null,2)],2),e("span",gn,r(C.label),1),C.badge?(n(),u("span",{key:1,class:L(["ml-auto px-2.5 py-1 rounded-full text-xs font-bold min-w-[24px] text-center transition-all duration-300",m.value===C.id?"bg-white/20 text-white backdrop-blur-sm":"bg-red-500 text-white shadow-md shadow-red-500/30 group-hover:scale-110"])},r(C.badge),3)):x("",!0)],2)],8,cn))),128))]),e("div",{class:"p-4 pt-2 border-t border-slate-200/60 bg-gradient-to-t from-slate-50/50 to-transparent mt-auto"},[D[3]||(D[3]=G('<div class="mb-3 px-4" data-v-b237463e><div class="flex items-center gap-3 p-3 rounded-xl bg-slate-100/60 border border-slate-200/60" data-v-b237463e><div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-md" data-v-b237463e><i class="fas fa-user text-white text-sm" data-v-b237463e></i></div><div class="flex-1 min-w-0" data-v-b237463e><p class="text-sm font-semibold text-slate-900 truncate" data-v-b237463e>Administrateur</p><p class="text-xs text-slate-500 truncate" data-v-b237463e>creff.pme.uk@gmail.com</p></div></div></div>',1)),e("button",{onClick:b,class:"w-full flex items-center gap-3 px-4 py-3.5 rounded-xl text-slate-700 hover:bg-red-50 hover:text-red-600 transition-all duration-300 group border border-transparent hover:border-red-200 relative z-10"},[...D[2]||(D[2]=[e("div",{class:"w-5 h-5 flex items-center justify-center"},[e("i",{class:"fas fa-sign-out-alt text-base group-hover:translate-x-0.5 transition-transform"})],-1),e("span",{class:"font-semibold text-sm"},"D√©connexion",-1)])])])])],2),p.value?(n(),u("div",{key:0,onClick:D[0]||(D[0]=C=>p.value=!1),class:"fixed inset-0 bg-black/60 backdrop-blur-sm z-30 lg:hidden transition-opacity duration-300"})):x("",!0),e("main",vn,[e("header",mn,[e("div",bn,[e("div",xn,[e("div",fn,[e("button",{onClick:D[1]||(D[1]=C=>p.value=!p.value),class:"lg:hidden p-2.5 rounded-xl text-slate-700 hover:bg-slate-100 transition-all duration-200 hover:scale-105"},[...D[5]||(D[5]=[e("i",{class:"fas fa-bars text-lg"},null,-1)])]),e("div",null,[e("h1",yn,r(k()),1),D[6]||(D[6]=e("p",{class:"text-sm text-slate-500 mt-0.5"},"Gestion et administration",-1))])]),D[7]||(D[7]=G('<div class="flex items-center gap-4" data-v-b237463e><button class="relative p-2.5 rounded-xl text-slate-600 hover:bg-slate-100 transition-all duration-200 hover:scale-105" data-v-b237463e><i class="fas fa-bell text-lg" data-v-b237463e></i><span class="absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full ring-2 ring-white" data-v-b237463e></span></button><div class="hidden sm:flex items-center gap-3 px-4 py-2 rounded-xl bg-slate-50 border border-slate-200/60" data-v-b237463e><div class="w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center" data-v-b237463e><i class="fas fa-user text-white text-xs" data-v-b237463e></i></div><div data-v-b237463e><p class="text-sm font-semibold text-slate-900" data-v-b237463e>Admin</p><p class="text-xs text-slate-500" data-v-b237463e>En ligne</p></div></div></div>',1))])])]),m.value==="overview"?(n(),u("div",hn,[ge(w).isLoading&&c.value.length===0?(n(),u("div",wn,[(n(),u(M,null,U(4,C=>e("div",{key:C,class:"group relative bg-white rounded-2xl p-6 shadow-lg shadow-slate-900/5 border border-slate-200/60 animate-pulse"},[...D[8]||(D[8]=[G('<div class="flex items-center justify-between mb-4" data-v-b237463e><div class="w-14 h-14 rounded-2xl bg-gray-200" data-v-b237463e></div><div class="w-12 h-6 bg-gray-200 rounded-full" data-v-b237463e></div></div><div class="h-8 bg-gray-200 rounded mb-2" data-v-b237463e></div><div class="h-4 bg-gray-200 rounded w-2/3" data-v-b237463e></div>',3)])])),64))])):(n(),u("div",$n,[(n(!0),u(M,null,U(c.value,C=>(n(),u("div",{key:C.id,class:"group relative bg-white rounded-2xl p-6 shadow-lg shadow-slate-900/5 border border-slate-200/60 hover:shadow-xl hover:shadow-slate-900/10 hover:-translate-y-1 transition-all duration-300 overflow-hidden"},[D[9]||(D[9]=e("div",{class:"absolute inset-0 bg-gradient-to-br from-transparent to-blue-50/0 group-hover:to-blue-50/30 transition-all duration-300 pointer-events-none"},null,-1)),e("div",kn,[e("div",_n,[e("div",{class:L(["w-14 h-14 rounded-2xl flex items-center justify-center shadow-lg transition-transform duration-300 group-hover:scale-110 group-hover:rotate-3",C.bgColor])},[e("i",{class:L([C.icon,C.iconColor,"text-2xl"])},null,2)],2),e("span",{class:L(["text-xs font-bold px-2.5 py-1 rounded-full shadow-sm",C.badgeColor])},r(C.change),3)]),e("h3",Dn,r(C.value),1),e("p",Cn,r(C.label),1)])]))),128))])),e("div",En,[D[10]||(D[10]=e("div",{class:"flex items-center gap-2 mb-6"},[e("div",{class:"w-1 h-6 bg-gradient-to-b from-blue-600 to-indigo-600 rounded-full"}),e("h3",{class:"text-xl font-bold text-slate-900"},"Actions rapides")],-1)),e("div",An,[(n(!0),u(M,null,U(d.value,C=>(n(),u("button",{key:C.id,onClick:A=>m.value=C.section,class:"group flex items-center gap-4 p-5 rounded-xl border-2 border-slate-200 hover:border-blue-500 hover:bg-gradient-to-br hover:from-blue-50 hover:to-indigo-50 transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/10 hover:-translate-y-0.5"},[e("div",Rn,[e("i",{class:L([C.icon,"text-blue-600 group-hover:text-white text-lg transition-colors"])},null,2)]),e("span",Tn,r(C.label),1)],8,jn))),128))])])])):x("",!0),e("div",Sn,[m.value==="events"?(n(),X(lt,{key:0})):x("",!0),m.value==="event-registrations"?(n(),X($s,{key:1})):x("",!0),m.value==="actualites"?(n(),X(rl,{key:2})):x("",!0),m.value==="gallery"?(n(),X(Il,{key:3})):x("",!0),m.value==="newsletter"?(n(),X(ua,{key:4})):x("",!0),m.value==="financing"?(n(),X(so,{key:5})):x("",!0),m.value==="training"?(n(),X(Yo,{key:6})):x("",!0),m.value==="publications"?(n(),X(on,{key:7})):x("",!0)])])])]))}}),Fn=be(Pn,[["__scopeId","data-v-b237463e"]]);export{Fn as default};
